---
title: "AWS 강의"
last_modified_at: "2024-01-04T10:00:00"
categories:
  - 크래프톤 정글
  - AWS
tags:
  - 크래프톤 정글
  - AWS
---

## AWS 강의
 리전 : 서버가 호스팅 될 물리적인 위치<br>
 latency를 고려하여 리전을 배치한다<br>

 리전 선택 시 고려 사항<br>
 고가용성, 높은 확장성, 높은 내결함성을 고려<br>
 -> 복수의 '가용 영역'(AZ)로 구성<br>

 로직을 돌리는 서버가 AZ 단으로 분리되어야 함<br>

 '네트워크'<br>
 - Amazon VPC(Virtual Private Cloud) 구축<br>

 가상의 개인 클라우드<br>
 - 사용자가 논리적으로 격리된 프라이빗 네트워크 환경을 만듦<br>
 - 가상의 네트워크 제어 기능<br>
 (IP 주소, 서브네팅, 라우팅, 보안그룹 등등)<br>
 (서브넷 분리를 통해 AZ 분리)<br>
 - CIDR 블록은 VPC 크기를 지정하여 생성<br>
 (/16~/28까지 지원 - 숫자가 작을수록 네트워크의 범위가 커짐)<br>
 (네트워크 대역대)<br>

 VPC는 region에 속함<br>
 AWS Cloud > AWS Account > Region > VPC<br>

 VPC를 직접 구현해서 사용하는 것을 권장한다 함<br>
 (기본적으로 defalut는 존재함)<br>

 VPC구성<br>
 - VPC 네트워크 IP 대역 정의<br>
 - 가용 영역(AZ) 별 서브넷 지정<br>
 - 라우팅 테이블 생성 및 연결<br>
 - 트래픽 접근 제어<br>

 CIDR(Classless Inter-Domain Routing)<br>
 /16 : 1010 1100 0001 1111 / 0000 0000 0000 0000<br>
 앞의 16번째가 고정, 뒤쪽의 16자리를 자유로이 사용 가능<br>

 같은 vpc 내부의 ip들은 '로컬 통신'으로 취급<br>
 (같은 라우팅 테이블을 사용)<br>
 
 인터넷 통신을 해야하는 경우<br>
 게이트웨이를 사용하여 인터넷 통신을 하게 된다<br>
 (라우팅 테이블을 통해 외부 통신 여부를 판단하고<br>
  인터넷 게이트웨이로 통신을 던지게 됨)<br>

 public 서브넷과, private 서브넷 존재<br>
 vpc 내부 통신에서 프라이빗 서브넷을 사용<br>
 외부 통신할 때 퍼블릭 서브넷을 사용<br>
 (private에서 외부통신이 필요한 경우, public 서브넷을 통해<br>
 통신)<br>

 일부 ip는 사용 불가<br>
 AWS가 예약한 IP주소<br>
 10.0.0.0~3 + 10.0.0.255<br>

 액세스 제어<br>
 NACL(Network Access Control List)<br>
 - 서브넷 단위의 방화벽<br>

 보안 그룹<br>
 - 인스턴스 단위의 차단벽<br>

  인바운드 : 나가는 것<br>
  아웃 바운드 : 들어오는 것<br>
  (이러한 규칙 설정을 해야 한다)<br>
 
 내가 통신 서버를 만든다면<br>
 리전 선택 -> 2개 이상의 az 설정하기(서브넷 만들기)<br>
 (vpc설정 - vpc 대역 확보, 주소 중복범위를 고려)<br>
 이후 로드밸런싱과 인터넷 게이트웨이 만들기<br>

 아마존 EC2<br>
 : 가상 서버(가상화)<br>
 (하이퍼바이저 : 서버를 가상화하여 위에 인스턴스를 올리게 해준다)<br>

 운영체제에 따라서<br>
 사용하게 되는 가상머신이 달라진다<br>
 정확히는 AMI(Amazon Machine Image)<br>

 이는 일종의 이미지 템플릿<br>
 Amazon EBS 스냅샷 등을 포함한다<br>

 AMI 선택이 서버 생성의 시작이다<br>

 커스텀 인스턴스 생성이 가능하다<br>
 
 데이터 저장 시, ec2 인스턴스가 아니라 EBS 내부에 저장해야<br>
 서버 에러 발생시, 안전한 복구가 가능함<br>
 (인스턴스 사용 시, '정지' 후 재시작 시,<br>
 물리적 호스트가 달라져, 데이터가 유지 안될 수 있으니 주의할 것)<br>

 각종 CPU 종류에 따른 인스턴스 유형도 존재<br>
 (+ 기본적으로 범용을 사용)<br>

 인스턴스 선택 시,<br>
 인스턴스 타입 + 세대 + 추가기능 . 인스턴스 크기 를 고려<br>
 (예를 들어 c 7 gn . xlarge)
  
 storage<br>
 (server, storage, network)<br>
 AWS에서 server는 instance가 담당<br>
 network는 가상화됨<br>

 storage : 저장소<br>
 standard를 보통 많이 사용하고,<br>
 장기 보존을 위한 아카이브 데이터의 경우는 보통<br>
 Glacier 라는 클래스를 이용한다고 함<br>

 (Intelligent-Tiering : 알아서 비용을 절약해준다)<br>
 (다만 이 클래스는 모니터링 비용이 추가적으로 부과됨)<br>
 
 Ec2의 인스턴스 store 같은 경우,<br>
 '물리 연결'된 디스크에 위치하여<br>
 접근 성능이 좋음 + 가격이 인스턴스의 비용에 포함<br>
 (일부 인스턴스에 포함되지 않는 점도 유의)<br>
 그러나, 장기 기억에 대하여 불안정하다는 단점이 있음<br>
 
 EBS 의 경우, 네트워크적으로 연결되어 있는 storage<br>
 ebs의 백업을 위하여 '스냅샷'을 채용<br>
 (반드시 필요한 경우에만 스냅샷을 설정하여 백업용 데이터 설정)<br>
 (물론 안하는 경우, 문제 발생시에는...)<br>

 객체(오브젝트) : 파일 또는 데이터의 기본 단위를 표현<br>
 이러한 객체의 데이터는 S3의 버킷에 저장됨<br>
 
 버킷 : 데이터를 저장하는 컨테이너<br>
 (폴더 구조와 유사<br>)

 게임 서버의 경우 fsx 를 이용한다는 말은 있음<br>
 (Windows file storage)<br>

 데이터 베이스<br>
 관계형 데이터 베이스에 연관된 Aurora, RDS 서비스<br>
 Im-memory 서비스인 ElastiCache 도 많이 쓰임<br>

