---
title: "Day 4 Work"
last_modified_at: "2025-08-05T16:00:00"
categories:
  - Unreal
tags:
  - Physics
  - Root Component
---

## 오늘의 과제
자신만의 레벨 디자인으로서<br>
다양한 에셋과 함께 창의적인 레벨디자인을 만드는 것이다<br>

마침 예시에 '굴러오는 거대한 공'이라는 부분이<br>
인상 깊어서 경사로에서 공들이 마구 굴러오고<br>
그걸 피하거나 버텨서 위로 올라가는 느낌의 레벨을 만들고 싶었다<br>

<img width="680" height="579" alt="Image" src="https://github.com/user-attachments/assets/140ceb23-7777-4626-9c67-36ca6198c5cb" /><br>

이런 느낌?<br>

~~(해당 폴가이즈 맵은 협동이지만)~~

## 구현해야 할 것
먼저 World에 LandScape 기능을 통하여 Ramp 기능을 이용하여<br>
적절한 경사로 느낌을 제작하였다<br>

<img width="2329" height="1151" alt="Image" src="https://github.com/user-attachments/assets/b65d6f13-0807-46a6-a287-2f6549cd71ae" /><br>

이후 [노션에서 공유된 에셋들](https://www.fab.com/ko/listings/654fa6ff-a473-408c-8d16-2741a1eb86ca)을<br>
이용하여 맵에 적당히 배치하였다<br>

플레이어 자체는 강의에서 나온 것을 migrate(이주)한 다음<br>
움직임을 일부 수정한 후(폴가이즈에 가깝게?)<br>
shift 에 대쉬 기능을 넣어 이동속도를 향상하였다<br>

이후 해야하는 일들은<br>
1. 굴러가는 공 구현
2. 1의 공을 생성하는 Spawner를 구현

## 굴러가는 공 구현하기
<img width="931" height="947" alt="Image" src="https://github.com/user-attachments/assets/157989fd-fb27-4101-aca5-13fc9d0448e2" /><br>

가장 간단한 방법은 static mesh가 물리의 영향을 받도록 하는 것이라<br>
생각하였기에 Physics - Simulate Physics 를 체크하였다<br>
그 이후 조금 공을 무겁게 하기 위하여 mass scale을 3으로 늘렸다<br>

<img width="2790" height="1126" alt="Image" src="https://github.com/user-attachments/assets/4dc35c15-04ff-4f3a-a037-8389f8a7559f" />

원래는 static Mesh에 Hit 이벤트를 사용하려 하였으나 <br>
Player 자체도 static mesh에 가깝기에<br>
Hit 이벤트가 다소 '간헐적'으로 발생하는 듯 하여<br>
Sphere Collision 컴포넌트를 추가하고<br>
Begin Overlap 이벤트를 사용하였다<br>

<img width="1936" height="708" alt="Image" src="https://github.com/user-attachments/assets/bff0544e-5245-4abd-b2df-c9a489eaac62" /><br>

부딪히는 경우,<br>
'플레이어 위치 - 공의 위치'를 통해 '공 -> 플레이어' 의<br>
방향을 찾은 후, normalize 하여<br>
가속도나 무게의 영향을 제거하였다<br>
(normalize 안하니까 예측하기 힘든 수준으로 날아가기도 했다)<br>

그리고 대부분 공이 플레이어보다 '큰' 상황이므로<br>
z축 값은 포함시키지 않고 100을 넣어 위쪽으로 튕기게 하였다<br>

## Ball Spawner 구현

<img width="1807" height="1029" alt="Image" src="https://github.com/user-attachments/assets/0b73754d-93f0-41b8-b2aa-8bf4a6e94bea" /><br>

단순하게 위에서 구현한 ball을 계속 일정 시간마다 생성해주는 액터이다<br>

Set Timer by Event 노드를 통하여<br>
일정시간(초) 마다 Spawn 이벤트를 호출시키고<br>
Spawn Actor 를 통해 공을 스폰시킨다<br>

- 스폰 반경을 주어 x,y 방향으로 조금 랜덤한 위치에 스폰시킨다<br>

- 공이 너무 오래 살아있으면 게임에 지장이 가니<br>
  life span을 1분으로 주어 공이 알아서 삭제되도록 하였다<br>

~~원래는 class 용 변수가 있었으나 디버깅 중 삭제~~<br>


## Begin Overlap이 정상적으로 작동하지 않네??
거의 다 구현한 줄 알았는데 문제가 발생하였다<br>

Spawn으로 생성한 Ball의 Begin Overlap 이벤트가 정상적으로 작동하지 않았다<br>
그래서 BP Ball을 직접 에디터에서 배치하여 테스트 하였는데<br>
이건 '정상적'으로 작동하였다<br>

그렇기에 내가 생각하기로는
1. Spawner 를 통해 생성하는 클래스가 이상한가?<br>
   -> 동일 클래스라면 이벤트가 잘 작동해야 하므로<br>
2. Collision Preset 문제인가?<br>
   -> Overlap 관련하여 문제가 발생할 때의 고질적인 원인 중 하나이므로<br>
3. 엔진 내부가 꼬여서 가끔씩 발생하는 문제인가?<br>
   -> 가끔씩 알게모르게 껐다 키면 문제가 해결되므로<br>
4. 피직스 관련 문제인가?<br>
   -> 이전 Begin Overlap 관련해선 피직스 옵션을 따로 설정하지 않았으므로<br>

중 하나일 것 같았다<br>

처음에는 Ball에서 수정된 내용이 Spawner에서 적용되지 않는 줄 알았으나<br>
'class' 타입이며, 별도로 저장한 이전 타입 것이 아니라 에디터에서<br>
클래스를 지정한 것이므로 아니라 판단하였다<br>

Collision Preset은 매우 자주 보이는 문제이지만<br>
f8을 통해 PIE 환경에서 보았을 때, 별다른 차이가 없어서<br>
이 문제도 pass<br>

관련 과정 중에서<br>
에디터를 재시작하였음에도 문제는 그대로 였기에<br>
엔진 상에서 가끔 보이는 버그도 아니였다<br>

따라서 Physics 관련 문제라 생각하고<br>
PIE에 생성된 액터를 눌러보았는데...<br>

<img width="2659" height="1182" alt="Image" src="https://github.com/user-attachments/assets/31c82284-147f-4400-aa4d-c50b3a8bd82a" /><br>

...??<br>
액터의 위치와 static mesh가 따로 논다...?<br>
Default SceneRoot와 그걸 부모로 삼는 Collision은<br>
생성된 위치에 그대로 있었다<br>

생각해보니 나는 Static Mesh 컴포넌트에만 Physics를 넣어놓았고<br>
별다른 설정 없이 나머지 요소들이 Static Mesh를 따라 이동한다고<br>
착각하고 있었다<br>

## 문제 수정
<img width="2239" height="1081" alt="Image" src="https://github.com/user-attachments/assets/d1729dd7-6b13-4849-9e1a-c01eb0bcc5a6" /><br>

따라서 Static Mesh를 Scene Root로 삼고<br>
이후 Collsion을 Static Mesh에 붙여<br>
위와 같은 계층 구조로 바꾸었다<br>

<img width="1953" height="1153" alt="Image" src="https://github.com/user-attachments/assets/20a541c1-4d33-49e3-80ba-a66b68949af9" /><br>

모든 요소들이 정상적으로 이동하였으며<br>
플레이어와의 Begin Overlap 이벤트도 잘 작동하게 되었다<br>

오늘의 주의점이자 배운점<br>

- Default Scene Root는 별도의 'Transform'을 가진다<br>

- 자식 요소는 '부모'를 따라 좌표를 형성하게 된다<br>
  (World Transform)<br>
  (자식은 부모를 기준으로 '상대적' 위치를 가짐<br>
  Local Position)<br>

=> DefaultSceneRoot가 움직이지 않았는데 Collision이 어디가리오?<br>
   Physics의 사용을 고려한다면 물리 법칙이 통용되는 컴포넌트를 root로 삼는 것이<br>
   안정된 결과를 보일 수 있음<br>

### 결과물

<iframe width="560" height="315"
    src="https://www.youtube.com/embed/WZo9wJbFBkk"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen>
</iframe><br>

만들고 여러 에셋을 배치하니 조금 더 그럴듯 한 모양이다<br>
