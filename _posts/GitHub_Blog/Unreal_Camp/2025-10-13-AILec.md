---
title: "ê¹€í•˜ì—° íŠœí„°ë‹˜ ê°•ì˜ - 'AI íŠ¹ê°• 1ê°• - ì´ë™ & ê°ì§€'"
date : "2025-10-13 16:00:00 +0900"
last_modified_at: "2025-10-13T16:00:00"
categories:
  - Unreal
  - C++
tags:
  - Unreal
  - C++
  - AI
  - AI Controller
  - AI Perception
---

# AI íŠ¹ê°• - ì´ë™ & ê°ì§€

ê¹€í•˜ì—° íŠœí„°ë‹˜ì˜ Notion ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°•ì˜ë¥¼ ë“¤ìœ¼ë©°<br>
ì¼ë¶€ë¥¼ ìˆ˜ì • ë° ì¬ì‘ì„±í•œ ë¸”ë¡œê¹…ìš© ê¸€<br>

## 1. AI ì‹œìŠ¤í…œì˜ ì „ì²´ êµ¬ì¡° ğŸ§ 

## í”Œë ˆì´ì–´ vs AIì˜ ì°¨ì´ì 

- í”Œë ˆì´ì–´ ìºë¦­í„°: í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤ ì…ë ¥ â†’ Player Controller â†’ Character â†’ ì›€ì§ì„<br>
- AI ìºë¦­í„°: í”„ë¡œê·¸ë˜ë°ëœ ë¡œì§ â†’ AI Controller â†’ Character â†’ ì›€ì§ì„<br>

## ì–¸ë¦¬ì–¼ AIì˜ í•µì‹¬ ìš”ì†Œë“¤

1. **AI Controller (ë‡Œ)**
    - ë¬´ì—‡ì„ í• ì§€ ê²°ì •í•˜ëŠ” ê³³<br>
    - ì˜ì‚¬ ê²°ì •ì„ ë‹´ë‹¹<br>

2. Pawn/Character (ëª¸)
    - ì‹¤ì œë¡œ ë§µì—ì„œ ì›€ì§ì´ëŠ” ë©”ì‹œ<br>
    - Controllerì˜ ëª…ë ¹ì„ ë°›ì•„ ì‹¤í–‰<br>
    - ì‹¤ì œ Worldì— ì¡´ì¬í•˜ëŠ” Mesh ê°™ì€ ê²ƒ<br>
    - Player/AI ì¸ì§€ì— ë”°ë¼ ê·¸ ì—­í• ì´ ë‹¬ë¼ì§<br>

3. Navigation System (ì§€ë„)<br>
    - AIê°€ "ì–´ë””ë¡œ ê°ˆ ìˆ˜ ìˆëŠ”ì§€" ì•Œë ¤ì£¼ëŠ” ì‹œìŠ¤í…œ<br>
    - ì¥ì• ë¬¼ì„ í”¼í•´ê°€ëŠ” ê²½ë¡œ ê³„ì‚°<br>

4. Perception System (ê°ê°)<br>
    - ì‹œê°, ì²­ê° ë“± ê°ì§€ ì‹œìŠ¤í…œ<br>
      (ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€ í•  ì˜ˆì •)<br>

5. Blackboard (ê¸°ì–µ)<br>
    - AIì˜ ë‹¨ê¸° ê¸°ì–µ ì €ì¥ì†Œ<br>
    - "í”Œë ˆì´ì–´ ìœ„ì¹˜", "ê²½ê³„ ìƒíƒœ" ë“± ì €ì¥<br>

6. Behavior Tree (í–‰ë™ ê²°ì •)<br>
    - IF-THEN ë¡œì§ì„ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„<br>
    - ë§Œì•½ í”Œë ˆì´ì–´ê°€ ë³´ì´ë©´ â†’ ì«“ì•„ê°€ê¸°<br>

## 2. ê¸°ë³¸ AI ìƒì„± - ì•„ë¬´ê²ƒë„ ì•ˆí•˜ê³  ì„œìˆëŠ” AI ğŸ˜´

### 1. SpartaAIController í´ë˜ìŠ¤ ìƒì„± ë° ì‘ì„±

```cpp
#pragma once

#include "CoreMinimal.h"
#include "AIController.h"
#include "SpartaAIController.generated.h"

UCLASS()
class SPARTAPROJECT_API ASpartaAIController : public AAIController
{
	GENERATED_BODY()

public:
	ASpartaAIController();

protected:
	virtual void OnPossess(APawn* InPawn) override;
};
```

```cpp
#include "SpartaAIController.h"

ASpartaAIController::ASpartaAIController()
{

}

void ASpartaAIController::OnPossess(APawn* InPawn)
{
	Super::OnPossess(InPawn);

	if (InPawn)
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI Controller is controlling %s."), *InPawn->GetName());
	}
}
```

### 2. SpartaAICharacter í´ë˜ìŠ¤ ìƒì„± ë° ì‘ì„±

```cpp
#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "SpartaAICharacter.generated.h"

UCLASS()
class SPARTAPROJECT_API ASpartaAICharacter : public ACharacter
{
	GENERATED_BODY()

public:
	ASpartaAICharacter();

protected:
	virtual void BeginPlay() override;
};
```

```cpp
#include "SpartaAICharacter.h"
#include "SpartaAIController.h"

ASpartaAICharacter::ASpartaAICharacter()
{
	AIControllerClass = ASpartaAIController::StaticClass();
	AutoPossessAI = EAutoPossessAI::PlacedInWorldOrSpawned;
}

void ASpartaAICharacter::BeginPlay()
{
	Super::BeginPlay();

	UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI character has been spawned."));
}
```

## 3. Navigation ì¶”ê°€ - ëœë¤í•˜ê²Œ ëŒì•„ë‹¤ë‹ˆëŠ” AI ğŸ²

### 1. SpartaAIController í´ë˜ìŠ¤ ìˆ˜ì •

```cpp
#pragma once

#include "CoreMinimal.h"
#include "AIController.h"
#include "SpartaAIController.generated.h"

UCLASS()
class SPARTAPROJECT_API ASpartaAIController : public AAIController
{
	GENERATED_BODY()

public:
	ASpartaAIController();

protected:
	virtual void BeginPlay() override;
	virtual void OnPossess(APawn* InPawn) override;

private:
	void MoveToRandomLocation();

	FTimerHandle RandomMoveTimer;

	UPROPERTY(EditAnywhere, Category = "AI")
	float MoveRadius = 1000.0f;
};

```

```cpp
#include "SpartaAIController.h"
#include "TimerManager.h"
#include "NavigationSystem.h"

ASpartaAIController::ASpartaAIController()
{

}

void ASpartaAIController::BeginPlay()
{
	Super::BeginPlay();

	GetWorldTimerManager().SetTimer(
		RandomMoveTimer,
		this,
		&ASpartaAIController::MoveToRandomLocation,
		3.0f,
		true,
		1.0f
	);
}

void ASpartaAIController::OnPossess(APawn* InPawn)
{
	Super::OnPossess(InPawn);

	if (InPawn)
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI Controller is controlling %s."), *InPawn->GetName());
	}
}

void ASpartaAIController::MoveToRandomLocation()
{
	APawn* MyPawn = GetPawn();
	if (!MyPawn)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] No Pawn to control."));
	}

	UNavigationSystemV1* NavSystem = UNavigationSystemV1::GetCurrent(GetWorld());
	if (!NavSystem)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] Could not find Navigation System."));
	}

	FNavLocation RandomLocation;
	bool bFoundLocation = NavSystem->GetRandomReachablePointInRadius(
		MyPawn->GetActorLocation(),
		MoveRadius,
		RandomLocation
	);

	if (bFoundLocation)
	{
		MoveToLocation(RandomLocation.Location);

		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Move target: %s"), *RandomLocation.Location.ToString());
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Could not find a reachable location."));
	}
}
```

- MoveToLocation ê°™ì€ Nav í•¨ìˆ˜ëŠ”<br>
  AIë¡œ ì¡°ì‘í•˜ê¸°ì—<br>
  Get Current Accelation ê°™ì€ 'Input' ê¸°ë°˜ì˜ í•¨ìˆ˜ë¡œ ABPì—ì„œ ê²€ì‚¬í•˜ëŠ” ê²½ìš°ëŠ”<br>
  ABPê°€ ë§ê°€ì§ˆ ìˆ˜ ìˆìŒ<br>

- ABP ìª½ì—ì„œ Player ì™€ AI ê°€ ì»¨íŠ¸ë¡¤í•˜ëŠ”ì§€ì— ë”°ë¼ ë¶„ê¸°ë¥¼ ë‚˜ëˆ„ëŠ” ê²ƒì„ ê¶Œì¥<br>

### 2. AI ì´ë™ ì†ë„ ì œì–´

```cpp
#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Character.h"
#include "SpartaAICharacter.generated.h"

UCLASS()
class SPARTAPROJECT_API ASpartaAICharacter : public ACharacter
{
	GENERATED_BODY()

public:
	ASpartaAICharacter();
	void SetMovementSpeed(float NewSpeed);

	UPROPERTY(EditAnywhere, Category = "AI")
	float WalkSpeed = 300.0f;

	UPROPERTY(EditAnywhere, Category = "AI")
	float RunSpeed = 600.0f;

protected:
	virtual void BeginPlay() override;
};
```

```cpp
#include "SpartaAICharacter.h"
#include "SpartaAIController.h"
#include "GameFramework/CharacterMovementComponent.h"

ASpartaAICharacter::ASpartaAICharacter()
{
	AIControllerClass = ASpartaAIController::StaticClass();
	AutoPossessAI = EAutoPossessAI::PlacedInWorldOrSpawned;

	UCharacterMovementComponent* Movement = GetCharacterMovement();
	Movement->MaxWalkSpeed = WalkSpeed;
	Movement->bOrientRotationToMovement = true;
	Movement->RotationRate = FRotator(0.0f, 540.0f, 0.0f);
}

void ASpartaAICharacter::BeginPlay()
{
	Super::BeginPlay();

	UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI character has been spawned."));
}

void ASpartaAICharacter::SetMovementSpeed(float NewSpeed)
{
	if (UCharacterMovementComponent* Movement = GetCharacterMovement())
	{
		Movement->MaxWalkSpeed = NewSpeed;
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Speed changed: %.1f"), NewSpeed);
	}
}
```

## 4. Perception ì¶”ê°€ - AIì—ê²Œ ëˆˆì„ ë‹¬ì•„ì£¼ê¸° ğŸ‘€

### 1. SpartaAIController í´ë˜ìŠ¤ ìˆ˜ì •

```cpp
#pragma once

#include "CoreMinimal.h"
#include "AIController.h"
#include "Perception/AIPerceptionTypes.h"
#include "SpartaAIController.generated.h"

class UAIPerceptionComponent;
class UAISenseConfig_Sight;

UCLASS()
class SPARTAPROJECT_API ASpartaAIController : public AAIController
{
	GENERATED_BODY()

public:
	ASpartaAIController();

protected:
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "AI")
	UAIPerceptionComponent* AIPerception;

	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "AI")
	UAISenseConfig_Sight* SightConfig;

	UFUNCTION()
	void OnPerceptionUpdated(AActor* Actor, FAIStimulus Stimulus);

	virtual void BeginPlay() override;
	virtual void OnPossess(APawn* InPawn) override;

private:
	void MoveToRandomLocation();

	FTimerHandle RandomMoveTimer;

	UPROPERTY(EditAnywhere, Category = "AI")
	float MoveRadius = 1000.0f;
};

```

```cpp
#include "SpartaAIController.h"
#include "TimerManager.h"
#include "NavigationSystem.h"
#include "Perception/AIPerceptionComponent.h"
#include "Perception/AISenseConfig_Sight.h"

ASpartaAIController::ASpartaAIController()
{
	AIPerception = CreateDefaultSubobject<UAIPerceptionComponent>(TEXT("AIPerception"));
	SetPerceptionComponent(*AIPerception);

	SightConfig = CreateDefaultSubobject<UAISenseConfig_Sight>(TEXT("SightConfig"));
	SightConfig->SightRadius = 1500.0f;
	SightConfig->LoseSightRadius = 2000.0f;
	SightConfig->PeripheralVisionAngleDegrees = 90.0f;
	SightConfig->SetMaxAge(5.0f);

	SightConfig->DetectionByAffiliation.bDetectEnemies = true;
	SightConfig->DetectionByAffiliation.bDetectNeutrals = true;
	SightConfig->DetectionByAffiliation.bDetectFriendlies = true;

	AIPerception->ConfigureSense(*SightConfig);
	AIPerception->SetDominantSense(SightConfig->GetSenseImplementation());
}

void ASpartaAIController::BeginPlay()
{
	Super::BeginPlay();

	if (AIPerception)
	{
		AIPerception->OnTargetPerceptionUpdated.AddDynamic(
			this,
			&ASpartaAIController::OnPerceptionUpdated
		);
	}

	GetWorldTimerManager().SetTimer(
		RandomMoveTimer,
		this,
		&ASpartaAIController::MoveToRandomLocation,
		3.0f,
		true,
		1.0f
	);
}

void ASpartaAIController::OnPossess(APawn* InPawn)
{
	Super::OnPossess(InPawn);

	if (InPawn)
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI Controller is controlling %s."), *InPawn->GetName());
	}
}

void ASpartaAIController::MoveToRandomLocation()
{
	APawn* MyPawn = GetPawn();
	if (!MyPawn)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] No Pawn to control."));
	}

	UNavigationSystemV1* NavSystem = UNavigationSystemV1::GetCurrent(GetWorld());
	if (!NavSystem)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] Could not find Navigation System."));
	}

	FNavLocation RandomLocation;
	bool bFoundLocation = NavSystem->GetRandomReachablePointInRadius(
		MyPawn->GetActorLocation(),
		MoveRadius,
		RandomLocation
	);

	if (bFoundLocation)
	{
		MoveToLocation(RandomLocation.Location);

		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Move target: %s"), *RandomLocation.Location.ToString());
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Could not find a reachable location."));
	}
}

void ASpartaAIController::OnPerceptionUpdated(AActor* Actor, FAIStimulus Stimulus)
{
	if (Stimulus.WasSuccessfullySensed())
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Saw something! %s"), *Actor->GetName());

		DrawDebugString(
			GetWorld(),
			Actor->GetActorLocation() + FVector(0, 0, 100),
			FString::Printf(TEXT("Saw: %s"), *Actor->GetName()),
			nullptr,
			FColor::Green,
			2.0f,
			true
		);
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Missed it! %s"), *Actor->GetName());

		DrawDebugString(
			GetWorld(),
			Actor->GetActorLocation() + FVector(0, 0, 100),
			FString::Printf(TEXT("Missed: %s"), *Actor->GetName()),
			nullptr,
			FColor::Red,
			2.0f,
			true
		);
	}
}
```

- ê°ì§€ ì¡°ê±´ì€ ë‹¤ì–‘í•˜ê¸°ì—<br>
  (í˜„ì¬ëŠ” 'ì‹œì•¼'ì— ê¸°ë°˜í•œ Sight ì§€ì •)<br>

- ìš°ì„ ì‹œí•˜ëŠ” 'ê°ì§€ ì¡°ê±´'(Dominant) ì„¤ì •ë„ ê°€ëŠ¥<br>

- ì•„êµ°/ì¤‘ë¦½/ì êµ° ê°™ì€ ê°ì§€ ì¡°ê±´ë„ ê°€ëŠ¥<br>
 
- ì´ë ‡ê²Œ AIì— ëŒ€í•œ 'ê°ì§€' ê¸°ëŠ¥ë§Œ ì¶”ê°€í•´ë„ í”Œë ˆì´ì–´ëŠ” ê°ì§€ X<br>
  Playerê°€ 'ê°ì§€ ë  ìˆ˜ ìˆëŠ”' ê¸°ëŠ¥ ë˜í•œ ë„£ì–´ì£¼ì–´ì•¼ í•¨<br>
  (ì•„ë§ˆë„ ë¶ˆí•„ìš”í•œ ê°ì§€ë¥¼ í”¼í•˜ê¸° ìœ„í•´?)<br>

```cpp
// ... ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€
#include "Perception/AIPerceptionStimuliSourceComponent.h"

protected:
	virtual void BeginPlay() override;
	
    UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "AI")
    UAIPerceptionStimuliSourceComponent* StimuliSource;
```

```cpp
// ... ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€
#include "Perception/AISense_Sight.h"

AThirdPersonCharacter::AThirdPersonCharacter()
{
    StimuliSource = CreateDefaultSubobject<UAIPerceptionStimuliSourceComponent>(TEXT("StimuliSource"));
}

void AThirdPersonCharacter::BeginPlay()
{
    Super::BeginPlay();
    
    if (StimuliSource)
    {
        StimuliSource->RegisterForSense(TSubclassOf<UAISense_Sight>());
        StimuliSource->RegisterWithPerceptionSystem();
    }
}
```

- UAIPerceptionStimuliSourceComponent ë¥¼ í†µí•´<br>
  ê°ì§€ ì‹œìŠ¤í…œì— ë“±ë¡ë˜ë„ë¡ ì„¤ì •<br>
  (Sight ì™€ ê°™ì´ ê°ì§€ë  ì¡°ê±´ì— ì¶”ê°€ ê°€ëŠ¥)<br>

## 5. ì¶”ì  ê¸°ëŠ¥ - í”Œë ˆì´ì–´ë¥¼ ì«“ì•„ê°€ëŠ” AI ğŸƒğŸ»

### 1. SpartaAIController í´ë˜ìŠ¤ ìˆ˜ì •

```cpp
#pragma once

#include "CoreMinimal.h"
#include "AIController.h"
#include "Perception/AIPerceptionTypes.h"
#include "SpartaAIController.generated.h"

class UAIPerceptionComponent;
class UAISenseConfig_Sight;

UCLASS()
class SPARTAPROJECT_API ASpartaAIController : public AAIController
{
	GENERATED_BODY()

public:
	ASpartaAIController();

protected:
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "AI")
	UAIPerceptionComponent* AIPerception;

	UPROPERTY(VisibleAnywhere, BlueprintReadOnly, Category = "AI")
	UAISenseConfig_Sight* SightConfig;

	UPROPERTY()
	AActor* CurrentTarget = nullptr;

	UFUNCTION()
	void OnPerceptionUpdated(AActor* Actor, FAIStimulus Stimulus);

	bool bIsChasing = false;
	FTimerHandle ChaseTimer;

	virtual void BeginPlay() override;
	virtual void OnPossess(APawn* InPawn) override;

	void StartChasing(AActor* Target);
	void StopChasing();
	void UpdateChase();

private:
	void MoveToRandomLocation();

	FTimerHandle RandomMoveTimer;

	UPROPERTY(EditAnywhere, Category = "AI")
	float MoveRadius = 1000.0f;
};

```

```cpp
#include "SpartaAIController.h"
#include "TimerManager.h"
#include "NavigationSystem.h"
#include "Perception/AIPerceptionComponent.h"
#include "Perception/AISenseConfig_Sight.h"
#include "SpartaAICharacter.h"
#include "Kismet/GameplayStatics.h"

ASpartaAIController::ASpartaAIController()
{
	AIPerception = CreateDefaultSubobject<UAIPerceptionComponent>(TEXT("AIPerception"));
	SetPerceptionComponent(*AIPerception);

	SightConfig = CreateDefaultSubobject<UAISenseConfig_Sight>(TEXT("SightConfig"));
	SightConfig->SightRadius = 1500.0f;
	SightConfig->LoseSightRadius = 2000.0f;
	SightConfig->PeripheralVisionAngleDegrees = 90.0f;
	SightConfig->SetMaxAge(5.0f);

	SightConfig->DetectionByAffiliation.bDetectEnemies = true;
	SightConfig->DetectionByAffiliation.bDetectNeutrals = true;
	SightConfig->DetectionByAffiliation.bDetectFriendlies = true;

	AIPerception->ConfigureSense(*SightConfig);
	AIPerception->SetDominantSense(SightConfig->GetSenseImplementation());
}

void ASpartaAIController::BeginPlay()
{
	Super::BeginPlay();

	if (AIPerception)
	{
		AIPerception->OnTargetPerceptionUpdated.AddDynamic(
			this,
			&ASpartaAIController::OnPerceptionUpdated
		);
	}

	GetWorldTimerManager().SetTimer(
		RandomMoveTimer,
		this,
		&ASpartaAIController::MoveToRandomLocation,
		3.0f,
		true,
		1.0f
	);
}

void ASpartaAIController::OnPossess(APawn* InPawn)
{
	Super::OnPossess(InPawn);

	if (InPawn)
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] AI Controller is controlling %s."), *InPawn->GetName());
	}
}

void ASpartaAIController::MoveToRandomLocation()
{
	APawn* MyPawn = GetPawn();
	if (!MyPawn)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] No Pawn to control."));
	}

	UNavigationSystemV1* NavSystem = UNavigationSystemV1::GetCurrent(GetWorld());
	if (!NavSystem)
	{
		UE_LOG(LogTemp, Error, TEXT("[Sparta] Could not find Navigation System."));
	}

	FNavLocation RandomLocation;
	bool bFoundLocation = NavSystem->GetRandomReachablePointInRadius(
		MyPawn->GetActorLocation(),
		MoveRadius,
		RandomLocation
	);

	if (bFoundLocation)
	{
		MoveToLocation(RandomLocation.Location);

		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Move target: %s"), *RandomLocation.Location.ToString());
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Could not find a reachable location."));
	}
}

void ASpartaAIController::OnPerceptionUpdated(AActor* Actor, FAIStimulus Stimulus)
{
	APawn* PlayerPawn = UGameplayStatics::GetPlayerPawn(GetWorld(), 0);
	if (Actor != PlayerPawn)
	{
		return;
	}

	if (Stimulus.WasSuccessfullySensed())
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Saw something! %s"), *Actor->GetName());

		DrawDebugString(
			GetWorld(),
			Actor->GetActorLocation() + FVector(0, 0, 100),
			FString::Printf(TEXT("Saw: %s"), *Actor->GetName()),
			nullptr,
			FColor::Green,
			2.0f,
			true
		);

		StartChasing(Actor);
	}
	else
	{
		UE_LOG(LogTemp, Warning, TEXT("[Sparta] Missed it! %s"), *Actor->GetName());

		DrawDebugString(
			GetWorld(),
			Actor->GetActorLocation() + FVector(0, 0, 100),
			FString::Printf(TEXT("Missed: %s"), *Actor->GetName()),
			nullptr,
			FColor::Red,
			2.0f,
			true
		);

		StopChasing();
	}
}

void ASpartaAIController::StartChasing(AActor* Target)
{
	if (bIsChasing && CurrentTarget == Target) return;

	CurrentTarget = Target;
	bIsChasing = true;

	GetWorldTimerManager().ClearTimer(RandomMoveTimer);

	if (ASpartaAICharacter* AIChar = Cast<ASpartaAICharacter>(GetPawn()))
	{
		AIChar->SetMovementSpeed(AIChar->RunSpeed);
	}

	UpdateChase();
	GetWorldTimerManager().SetTimer(
		ChaseTimer,
		this,
		&ASpartaAIController::UpdateChase,
		0.25f,
		true
	);
}

void ASpartaAIController::StopChasing()
{
	if (!bIsChasing) return;

	CurrentTarget = nullptr;
	bIsChasing = false;

	GetWorldTimerManager().ClearTimer(ChaseTimer);

	StopMovement();

	if (ASpartaAICharacter* AIChar = Cast<ASpartaAICharacter>(GetPawn()))
	{
		AIChar->SetMovementSpeed(AIChar->WalkSpeed);
	}

	GetWorldTimerManager().SetTimer(
		RandomMoveTimer,
		this,
		&ASpartaAIController::MoveToRandomLocation,
		3.0f,
		true,
		2.0f
	);
}

void ASpartaAIController::UpdateChase()
{
	if (CurrentTarget && bIsChasing)
	{
		MoveToActor(CurrentTarget, 100.0f);
	}
}
```