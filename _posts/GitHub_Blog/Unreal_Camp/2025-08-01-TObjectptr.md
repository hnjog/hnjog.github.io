---
title: "UObject Ptr"
last_modified_at: "2025-08-01T16:00:00"
categories:
  - Unreal
tags:
  - TObjectPtr
  - Unreal GC
---

## UObject κΈ°λ° ν΄λμ¤μ— λ€ν• ν¬μΈν„°
μ–Έλ¦¬μ–Ό κ°•μλ¥Ό λ“£λ μ¤‘<br>
TOjbectPtrλΌλ” λ…νΉν• 'ν¬μΈν„°'λ¥Ό λ°κ²¬ν•μ€λ‹¤<br>
(T* λ°©μ‹μ μΌλ° 'μƒ' ν¬μΈν„°μ™€λ” λ‹¤λ¥Έ)<br>

Unrealμ€ μ™ μ΄λ¬ν• ν¬μΈν„°λ¥Ό μ‚¬μ©ν•κ³  κ¶μ¥ν• κΉ?<br>

### TObjectPtr
μ–Έλ¦¬μ–Όμ 'UObject' κΈ°λ° ν΄λμ¤λ¥Ό κ°μ‹Έλ”<br>
'μ¤λ§νΈ ν¬μΈν„°' λ°©μ‹μ λνΌ ν΄λμ¤<br>

```
TObjectPtr<AActor> MyActor;  // AActor* MyActor; λ€μ‹  μ‚¬μ© κ¶μ¥
```

ν•΄λ‹Ή ν΄λμ¤ λ‚΄λ¶€μ—μ„ ->λ‚ * κ°™μ€ μ—°μ‚°μλ¥Ό μ§€μ›ν•κΈ°μ—<br>
C++μ ν¬μΈν„° μ²λΌ μ‚¬μ©μ΄ κ°€λ¥<br>

κ·Έλ ‡λ‹¤λ©΄ κΈ°μ΅΄ ν¬μΈν„° λ€μ‹  μ‚¬μ©ν• λ§ν• λ©”λ¦¬νΈλ”?<br>

| ν•­λ©                              | μ΄μ  / μ„¤λ…                                                   |
| ------------------------------- | --------------------------------------------------------- |
| π”§ **ν•Έλ“¤ κΈ°λ° κµ¬μ΅° (FObjectHandle)** | λ‹¨μ μ£Όμ†κ°’μ΄ μ•„λ‹ μΈλ±μ¤/μ‹λ¦¬μ–Ό κΈ°λ°μΌλ΅ κ°μ²΄λ¥Ό κ΄€λ¦¬ β†’ PIEλ‚ λ¦¬λ΅λ”©, λ¦¬ν”λ ‰μ…μ—μ„λ„ μ•μ •     |
| π§  **λ¬΄ν¨ν™” κ°μ§€ κ°€λ¥**                | μ°Έμ΅° λ€μƒ κ°μ²΄κ°€ νκ΄΄λ  κ²½μ° μλ™μΌλ΅ `nullptr` μ²λ¦¬λμ–΄, dangling pointer λ°©μ§€ |
| π“¦ **μ‹λ¦¬μ–ΌλΌμ΄μ¦ / λ³µμ  μ§€μ› κ°•ν™”**        | raw pointerλ³΄λ‹¤ λ…μ‹μ μ΄κ³  μ•μ „ν•κ² μ €μ¥/λ³µμ› κ°€λ¥                         |
| π§µ **λ©€ν‹°μ¤λ λ”©μ—μ„ μ•μ •μ„±**              | κ°μ²΄ μΈλ±μ¤λ¥Ό ν†µν• ν•Έλ“¤ κΈ°λ° μ²λ¦¬ β†’ GCμ™€μ μ¶©λ λ°©μ§€                          |
| π” **λ¦¬ν”λ ‰μ… & GC ν†µν•© μµμ ν™”**         | `UPROPERTY()`μ™€ ν•¨κ» μ‚¬μ© μ‹, Unrealμ λ¨λ“  μ‹μ¤ν…μ—μ„ μ™„μ „ν•κ² ν†µν•© μ²λ¦¬ κ°€λ¥    |

- TObjectPtrμ€ λ‚΄λ¶€μ μΌλ΅ FObjectHandleμ΄λ‚ FObjectPtrμ„ κΈ°λ°μΌλ΅ ν•λ‹¤<br>
  (μ•„λμ½ GC λ¶€λ¶„μ—μ„ μ¶”κ°€ μ„¤λ…)<br>

- (== nullptr) μ²΄ν¬ μ‹ λ‚΄λ¶€μ μΌλ΅ μ ν¨ κ²€μ‚¬ μ‹¤ν–‰ν•μ—¬<br>
  Dangling Pointer μƒν™© λ°©μ§€ κ°€λ¥<br>
  (μΌλ° ν¬μΈν„°λ” GCκ°€ μ‚­μ ν•λ”λΌλ„ <br>
  κ·Έ κ°’μ΄ 'μ ν¨'ν•μ§€ μ²΄ν¬ν•  μ μ—†κΈ°μ— μ¶”μ² x)<br>

- TObjectPtrλ” FArchive κΈ°λ° μ§λ ¬ν™” μ‹μ— κ°μ²΄ κ²½λ΅ μ •λ³΄ + ν•Έλ“¤ μ •λ³΄κ°€ ν•¨κ» μ €μ¥<br>
  (μ €μ¥/λ¶λ¬μ¤κΈ°, λ λ²¨ μ¤νΈλ¦¬λ°, Editorμ λλλ¦¬κΈ° λ“±μ—μ„ κ°μ²΄ μ°Έμ΅° λ³µμ›μ„ μ •ν™•ν)<br>

- Unrealμ λ¦¬ν”λ ‰μ… μ‹μ¤ν… (UProperty, FArchive, FReferenceCollector)μ€<br>
  TObjectPtr νƒ€μ…μ„ κΈ°λ°μΌλ΅ μ„¤κ³„λμ—κΈ°μ—<br>
  μ μ©ν• κΈ°λ¥μ„ μ κ³µ κ°€λ¥<br>
  (ex : Editorμ Detail ν¨λ„μ—μ„ μ •λ³΄ ν™•μΈ κ°€λ¥)<br>

---

### μΌλ° ν¬μΈν„°(T*)λ„ μ—¬μ „ν μ‚¬μ©ν•λ‹¤

| μƒν™©                        | μ΄μ                                               |
| ------------------------- | ----------------------------------------------- |
| π”Ή **ν•¨μ νλΌλ―Έν„° / λ΅μ»¬ λ³€μ**    | GCμ— λ“±λ΅ν•  ν•„μ” μ—†μ. μ„μ‹ μ°Έμ΅°λ΅ μ¶©λ¶„                        |
| π”Ή **μ„±λ¥ μµμ ν™”κ°€ ν•„μ”ν• μ €μμ¤€ μ½”λ“** | GC νΈλμ»¤/λ¦¬ν”λ ‰μ…μ—μ„ μ μ™Έλ¨ β†’ μ¤λ²„ν—¤λ“ μ—†μ                     |
| π”Ή **λΉ„-UObjectλ¥Ό μ°Έμ΅°ν•  λ•**   | GC λ€μƒμ΄ μ•„λ‹ (ex. `FVector*`, `int*`, `MyStruct*`) |
| π”Ή **μμ²΄μ μΌλ΅ μƒλ…μ£ΌκΈ°λ¥Ό κ΄€λ¦¬ν•  λ•**  | ex. κ²μ„ν”λ μ΄ μ½”λ“μ—μ„ μΌμ‹μ μΌλ΅λ§ μ“°λ” λ νΌλ°μ¤                   |

μƒν™©μ— λ”°λΌ μ μ ν•κ² μ‚¬μ©μ΄ κ°€λ¥<br>


### TMI : Unreal GC

#### μ–Έλ¦¬μ–Όμ GCκ°€ κ°μ²΄λ¥Ό μ¶”μ ν•λ” κΈ°μ¤€μ€ UPROPERTY()

κ°μ²΄λ” T* μ΄λ“  TObjectPtrμ΄λ“  UPROPERTYλ¥Ό ν†µν•΄ μ¶”μ λ¨<br>

```
UPROPERTY()
AActor* MyActor; // RefCountμ— μ¶”κ°€
```

#### μ–Έλ¦¬μ–Ό GCλ” ObjectHandle κΈ°λ°

byteλ¥Ό μ½λ” λ°©μ‹μ΄ μ•„λ‹<br>
κ°μ²΄μ μΈλ±μ¤μ™€ μ‹λ¦¬μ–Ό λ²νΈλ¥Ό ν†µν•΄ μ°Έμ΅°<br>

-> PIEλ‚ λ λ²¨ μ¬λ΅λ”© λ“±μ—μ„ 'μ°Έμ΅°'λ¥Ό μ μ§€<br>
   (κ°μ²΄ νκ΄΄ μ‹, μ‹λ¦¬μ–Ό λ²νΈκ°€ λ‹¬λΌμ Έ 'λ¬΄ν¨ν™”'λ¥Ό κ°μ§€)<br>

---

## μ–Έλ¦¬μ–Όμ μ£Όμ”ν• ν¬μΈν„° λνΌλ“¤

### TWeakObjectPtr (μ•½ν• μ°Έμ΅°)
μ°Έμ΅° λ€μƒμ΄ GCλ΅ μ‚¬λΌμ Έλ„ 'μ ν¨'ν•μ§€ μ•μ<br>
'μ†μ 'ν•μ§€ μ•κΈ°μ— RefCountμ— μ§μ ‘ μν–¥μ£Όμ§€ μ•μ<br>
IsValid(), Get() λ“±μΌλ΅ μ•μ „ν•κ² μ ‘κ·Όν•΄μ•Ό ν•λ‹¤<br>

```
TWeakObjectPtr<AActor> CachedActor;

if (CachedActor.IsValid())
    CachedActor->DoSomething();
```

(μΊμ‹±, μµμ €λ²„ ν¨ν„΄, Timer μ½λ°± λ“±μΌλ΅ μ‚¬μ©)<br>

### TSoftObjectPtr (μ§€μ—° λ΅λ”© κ°€λ¥ν• μ†ν”„νΈ μ°Έμ΅°)
κ°μ²΄λ¥Ό κ²½λ΅(Path)λ΅ μ €μ¥ν•¨ (ex : "/Game/Some/Asset")<br>
λ©”λ¨λ¦¬μ— μ—†μΌλ©΄ λ™κΈ° or λΉ„λ™κΈ° λ΅λ“<br>
GCμ— μν–¥ X, ν•μ§€λ§ UPROPERTY() μ‚¬μ© μ‹ μ—λ””ν„°μ— μ €μ¥ κ°€λ¥<br>
λ¦¬μ†μ¤λ¥Ό λ©”λ¨λ¦¬μ— λ‚μ¤‘μ— μ¬λ ¤ λ©”λ¨λ¦¬λ¥Ό μ μ•½ <br>


```
TSoftObjectPtr<UTexture2D> SoftTex;

// λ™κΈ° λ΅λ“ (κ²μ„ μΌμ‹ μ •μ§€ κ°€λ¥μ„± μμ)
UTexture2D* Loaded = SoftTex.LoadSynchronous();  

// λλ” λΉ„λ™κΈ° λ΅λ“:
StreamableManager.RequestAsyncLoad(SoftTex.ToSoftObjectPath(), Callback);
```

(μ—λ””ν„° μ½μ—μ„ λ¦¬μ†μ¤λ¥Ό μ°Έμ΅°ν•  λ• μ‚¬μ©)<br>

### TLazyObjectPtr (λμ¨ν• μ°Έμ΅°)
μ‹¤μ  μ°Έμ΅°ν•λ” κ°μ²΄λ¥Ό λ©”λ¨λ¦¬λ¥Ό μ μ§€ν•μ§€ μ•μ<br>
κ°μ²΄μ ObjectIDλ§ κΈ°μ–µν•κ³  μλ‹¤κ°€<br>
ν•„μ”ν•  λ• Get() ν•¨μλ¥Ό ν†µν•΄ μ°Ύμ•„μ΄<br>
(Softμ²λΌ Loadν•μ§€ μ•κΈ°μ— μ£Όμ)<br>

```
TLazyObjectPtr<AActor> LazyActor;

AActor* RealActor = LazyActor.Get();  // μ—†μΌλ©΄ nullptr λ°ν™
```

(SaveGame μ΄λ‚ λ λ²¨ κ°„ μ°Έμ΅° λ“±μ— μ‚¬μ© κ°€λ¥)<br>

### TScriptInterface (Interface μ°Έμ΅° ν¬μΈν„°)
UObject κΈ°λ° μΈν„°νμ΄μ¤λ¥Ό μ €μ¥<br>
λ‚΄λ¶€μ μΌλ΅λ” (UObject*, Interface*) λ¥Ό μμΌλ΅ λ“¤κ³  μμ<br>
Execute_XXX() νΈμ¶ λ€μ‹ , κ·Έλƒ¥ ptr->MyFunction() κ°€λ¥<br>

```
TScriptInterface<IInteractable> InteractTarget;

InteractTarget->Interact(); // νΈμ¶ κ°€λ¥
```

(BP, C++ μΈν„°νμ΄μ¤μ νΈν™μ΄ κ°€λ¥)<br>

### FObjectPtr / FObjectHandle (μ €λ λ²¨ ν•Έλ“¤ μ‹μ¤ν… (UE5))
UObjectμ ν¬μΈν„° λ€μ‹  μΈλ±μ¤ + ν¬μΈν„° μΊμ‹ κµ¬μ΅°<br>
λ„¤νΈμ›ν¬, λ³µμ , ν¨ν‚¤μ§€ λ΅λ”© λ“± λ‚΄λ¶€ μ‹μ¤ν… μµμ ν™”λ¥Ό μ„ν•¨<br>
μΌλ°μ μΌλ΅ μ λ‹¤λ£¨μ§€ μ•μ (TObjectPtr λ‚΄λ¶€ κµ¬ν„μ— μ“°μ„)<br>


### μ •λ¦¬

| νƒ€μ…                             | μ©λ„ μ”μ•½                         | GC μ¶”μ  | μ§€μ—° λ΅λ”© | κ°•ν• μ°Έμ΅° | νΉμ§• μ”μ•½                                   |
| ------------------------------ | ----------------------------- | ----- | ----- | ----- | --------------------------------------- |
| `TObjectPtr<T>`                | β… κΈ°λ³Έ κ¶μ¥ μ¤λ§νΈ ν¬μΈν„°               | β…     | β     | β…     | `T*`μ²λΌ μ“°λ GC/Editor/λ¦¬ν”λ ‰μ…μ— μ•μ „, UE5 ν‘μ¤€ν™”   |
| `TWeakObjectPtr<T>`            | β— μ•½ν• μ°Έμ΅° (GC κ°μ‹, μƒλ…μ£ΌκΈ° λ³΄μ¥ X)    | β…     | β     | β     | κ°μ²΄κ°€ μ‚΄μ•„μμ„ λ•λ§ μ ν¨, μΊμ‹/UI/μ„μ‹ μ°Έμ΅°μ— μ ν•©         |
| `TSoftObjectPtr<T>`            | π”„ μ§€μ—° λ΅λ”© κ°€λ¥ν• μ—μ…‹ μ°Έμ΅°            | β     | β…     | β     | κ²½λ΅ κΈ°λ° μ°Έμ΅°. λ©”λ¨λ¦¬ μ μ•½ & λΉ„λ™κΈ° λ΅λ”© κ°€λ¥            |
| `TLazyObjectPtr<T>`            | π’¤ λμ¨ν• μ°Έμ΅° (ObjectID κΈ°λ°)       | β     | β     | β     | μ‹¤μ  κ°μ²΄ λ€μ‹  IDλ§ μ €μ¥. SaveGame λ“±μ—μ„ μ΅΄μ¬ μ—¬λ¶€ μ¶”μ μ© |
| `TScriptInterface<I>`          | π§© Interface + UObject ν¬μΈν„°    | β…     | β     | β…     | μΈν„°νμ΄μ¤ ν•¨μ νΈμ¶μ© ν¬μΈν„°. UObject κΈ°λ° μΈν„°νμ΄μ¤λ§ μ§€μ›  |
| `FObjectPtr` / `FObjectHandle` | π”§ λ‚΄λ¶€μ© ν•Έλ“¤ κΈ°λ° μ°Έμ΅° κµ¬μ΅° (UE5 Core) | β…     | β     | β…     | GC λ° λ¦¬ν”λ ‰μ… μµμ ν™”λ¥Ό μ„ν• low-level ν¬μΈν„° κµ¬μ΅°      |
