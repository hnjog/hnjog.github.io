---
title: "C++ μ΄κ²ƒμ €κ²ƒ 2"
last_modified_at: "2025-07-25T16:00:00"
categories:
  - C++
tags:
  - λ™μ  λ©”λ¨λ¦¬
  - μ£Όμ†κ°’
  - μΊμ¤ν…
  - μ—…/λ‹¤μ΄ μΊμ¤ν…
  - κΉμ€/μ–•μ€ λ³µμ‚¬
  - λ•κΈ€λ¦¬ ν¬μΈν„°
  - μ¤λ§νΈ ν¬μΈν„°
---

## π“ μ¤λμ λ©μ°¨

- [ν¬μΈν„°μ£Όμ†κ°’μ™€ λ™μ  λ©”λ¨λ¦¬ κ°€μƒ λ©”λ¨λ¦¬ μμ—­](#ν¬μΈν„°μ£Όμ†κ°’μ™€-λ™μ -λ©”λ¨λ¦¬-κ°€μƒ-λ©”λ¨λ¦¬-μμ—­)
- [μΊμ¤ν…](#μΊμ¤ν…)
- [μ—…λ‹¤μ΄ μΊμ¤ν…](#μ—…λ‹¤μ΄-μΊμ¤ν…)
- [κΉμ€μ–•μ€ λ³µμ‚¬](#κΉμ€μ–•μ€-λ³µμ‚¬)
- [λ•κΈ€λ¦¬ ν¬μΈν„°](#λ•κΈ€λ¦¬-ν¬μΈν„°)
- [μ¤λ§νΈ ν¬μΈν„°](#μ¤λ§νΈ-ν¬μΈν„°)


## ν¬μΈν„°(μ£Όμ†κ°’)μ™€ λ™μ  λ©”λ¨λ¦¬, κ°€μƒ λ©”λ¨λ¦¬ μμ—­
C++μ΄ ν•λ“μ›¨μ–΄μ™€ λ°€μ ‘ν• μ—°κ΄€μ΄ μλ” μ΄μ λ“¤μ€<br>
'ν¬μΈν„°'μ™€ 'μ£Όμ†κ°’'μ— λ€ν• μ—°μ‚°, λ©”λ¨λ¦¬μ— λ€ν• 'μ§μ ‘ μ μ–΄' λ“±μ΄ κ°€λ¥ν• μ μ„ κΌ½λ”λ‹¤<br>
(C#,Java,Python λ“±μ€ ν•΄λ‹Ή κ°λ…μ„ μ¶”μƒν™”ν•μ—¬ μ§€μ›)<br>


### λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή
μ΄μ „ ν¬μ¤ν…μ ['ν¬μΈν„°'](https://hnjog.github.io/c++/C++_Bases/)λ” <br>
ν¬μΈν„° μμ²΄μ κ°λ…κ³Ό const pointerλ¥Ό λ‹¤λ£¨μ—μΌλ‹<br>
ν¬μΈν„°μ— λ€ν• λ” μ—°κ΄€λ κ°λ…λ“¤μ„ λ‹¤λ£° μμ •μ΄λ‹¤<br>

ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ” κ°€μ¥ ν° μ΄μ  μ¤‘ ν•λ‚λ”<br>
'λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή'μ„ ν•κΈ° μ„ν•¨<br>
(κ°€μƒ λ©”λ¨λ¦¬ μμ—­μ— ν•„μ”ν• λ©”λ¨λ¦¬ κ³µκ°„μ„ ν• λ‹Ήν•κ³ <br>
κ·Έ μ£Όμ†κ°’μ„ λ°›μ•„ μ‚¬μ©)<br>

λ¨Όμ €, λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ„ μ‚¬μ©ν•λ” μ΄μ λ” λ­κΉ?<br>

1. λ³€μμ— ν•„μ”ν• ν¬κΈ°λ¥Ό μ»΄νμΌ νƒ€μ„μ— μ• μ μ—†μ<br>
  : κ·Έλ ‡κΈ°μ— λ°νƒ€μ„μ¤‘μ— λ°μ΄ν„°λ¥Ό μ λ™μ μΌλ΅ λ‹¤λ£¨λ ¤λ©΄<br>
   λ™μ μΈ λ©”λ¨λ¦¬ ν• λ‹Ήμ΄ ν•„μ”<br>
   (Vector<>κ°€ μ‚¬λ‘λ°›λ” μ΄μ λ” νΈλ¦¬ν• λ™μ  λ°°μ—΄μ΄κΈ° λ•λ¬Έ μ•„λ‹κΉ)<br>

2. ν•¨μ νΈμ¶ κ°„μ—λ„ λ°μ΄ν„°λ¥Ό μ μ§€ κ°€λ¥<br>
  : μ§€μ—­ λ³€μλ” scopeλ¥Ό μ§€λ‚λ©΄ μ‚¬λΌμ§€μ§€λ§<br>
    λ™μ  ν• λ‹Ήν• λ³€μλ” μ£Όμ†κ°’λ§ μ•λ©΄ μ—¬μ „ν ν•΄λ‹Ή μ„μΉμ— μ΅΄μ¬<br>

3. μ¤νƒμ μ©λ‰μ„ λ„μ–΄μ„λ” λ°°μ—΄μ΄λ‚ κ°μ²΄λ¥Ό μƒμ„±ν•κΈ° μ„ν•¨<br>
   : μ¤νƒμ ν¬κΈ°λ” λ³„λ„λ΅ μ„¤μ •ν•μ§€ μ•λ” κ²½μ° μ•½ 2MB κ°€ ν•κ³„<br>
    λ”°λΌμ„ μ΄κ²ƒλ³΄λ‹¤ λ” ν° λ°°μ—΄μ΄λ‚ κ°μ²΄λ¥Ό μƒμ„±ν•λ ¤λ©΄<br>
    λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ΄ ν•„μ<br>

λ“±μ μ΄μ κ°€ μ΅΄μ¬ν•λ‹¤<br>

μ΄λ¬ν• λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ€ μ•μ„ λ§ν•<br>
'κ°€μƒ λ©”λ¨λ¦¬ μμ—­'μ 'heap' μμ—­μ— ν• λ‹Ήλλ‹¤<br>

### κ°€μƒ λ©”λ¨λ¦¬ μμ—­ κµ¬μ΅°

```
μ£Όμ† β†“ (λ‚®μ)
+-------------------------+
| Code μμ—­ (.text)      |  β† μ‹¤ν–‰ μ½”λ“ μ €μ¥
+-------------------------+
| Data μμ—­ (.data/.bss) |  β† μ „μ—­/μ •μ  λ³€μ
+-------------------------+
| Heap μμ—­              |  β† λ™μ  λ©”λ¨λ¦¬ (new/malloc)
|                         |  β†‘ μ„μ½μΌλ΅ ν™•μ¥
+-------------------------+
| λ―Έμ‚¬μ© μμ—­            |  β† κ°€λ“ νμ΄μ§€ λ“±
+-------------------------+
| Stack μμ—­             |  β† μ§€μ—­ λ³€μ, ν•¨μ μ½
|                         |  β†“ μ•„λλ΅ ν™•μ¥
+-------------------------+
μ£Όμ† β†‘ (λ†’μ)

```

- μ΄λ¬ν• 'κ°€μƒ λ©”λ¨λ¦¬'λ” OSκ°€ κ° ν”„λ΅μ„Έμ¤μ—κ²<br>
  'λ…λ¦½μ 'μΈ κ³µκ°„μ„ μ κ³µν•κΈ° μ„ν• κ²ƒμ΄λ‹¤<br>
   (κ° ν”„λ΅μ„Έμ¤λ” μμ‹ λ§μ΄ 0x... ~ 0x... κΉμ§€ λ…μ ν•λ‹¤ μ—¬κΉ€)<br>

- μ‹¤μ  λ¬Όλ¦¬ λ©”λ¨λ¦¬λ” RAMκ³Ό λ§¤ν•‘λμ–΄ μκ³ <br>
  μ΄λ” Page Tableκ³Ό TLB λ“±μ΄ κ΄€λ¦¬ν•΄μ¤€λ‹¤<br>

- Heapμ— μ‹¤μ  κ³µκ°„μ„ ν• λ‹Ήν•΄μ£Όλ” κ²ƒμ€ OSμ—κ² μ”μ²­ν•μ—¬<br>
  μ°λ¦¬κ°€ μ›ν•λ” newμ κ²°κ³Όλ΅ ν• λ‹Ήν• κ³µκ°„μ μ£Όμ†κ°’μ„ λ°›μ<br>

κ°€μƒ λ©”λ¨λ¦¬μ— λ€ν• μ¶”κ°€μ μΈ λ‚΄μ©μ€<br>
C++λ³΄λ‹¤λ” OSμ— κ°€κΉμ›μ§€λ―€λ΅ μ΄μ „ ν¬μ¤ν…ν• κ²ƒμ„ λ‚¨κΈ΄λ‹¤<br>
[OSκ°•μ1](https://hnjog.github.io/%ED%81%AC%EB%9E%98%ED%94%84%ED%86%A4%20%EC%A0%95%EA%B8%80/cs/os/OSS1/) , [OSκ°•μ2](https://hnjog.github.io/%ED%81%AC%EB%9E%98%ED%94%84%ED%86%A4%20%EC%A0%95%EA%B8%80/cs/os/OSS2/)<br>

λ‹¤μ‹ μ›λ C++λ΅ λμ•„μ¤μλ©΄<br>

```
int* ptr = new int(10); // OSμ—κ² int ν¬κΈ° λ§νΌμ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ„ μ”μ²­

delete ptr; // Osμ—κ² ν•΄λ‹Ή μμ—­μ΄ λ” μ΄μƒ ν•„μ”ν•μ§€ μ•μμ„ μ•λ¦Ό
```

new λ¥Ό ν†µν•μ—¬ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ή<br>
deleteλ΅ λ©”λ¨λ¦¬λ¥Ό λ°ν™<br>
ν•λ‹¤λ” μ μ„ λ…μ‹¬ν•μ<br>
(newμ™€ deleteλ” μΌμΆ…μ μ—°μ‚°μμ΄κΈ°μ— 'ν΄λμ¤μ μ—°μ‚°μ μ¬μ •μ(μ¤λ²„λ΅λ”©)'μ΄<br>
 κ°€λ¥ν•λ‹¨ μ λ„ μ•μ•„λ” λ‘μ)<br>

## μΊμ¤ν…
'μλ£ν• λ³€ν™' μΌλ΅<br>
  νΉμ • νƒ€μ…μ„ 'λ‹¤λ¥Έ νƒ€μ…'μΌλ΅ μ½λ” κ²ƒμ„ λ§ν•λ‹¤<br>
  C++μ—μ„  4κ°€μ§€ λ…μ‹μ  μΊμ¤ν… μ—°μ‚°μλ¥Ό μ§€μ›ν•λ‹¤<br>
  (static_cast, dynamic_cast,const_cast, reinterpret_cast)<br>

- static_cast<><br>
 : μ •μ  μΊμ¤ν…(μ»΄νμΌ νƒ€μ„μ— κ²€μ‚¬)<br>
 κΈ°λ³Έ μλ£ν•μ ν•λ³€ν™μ΄λ‚, 'μƒμ† κ΄€κ³„'μ—μ„μ 'μ—…μΊμ¤ν…' κ°™μ€ κ³³μ— μ‚¬μ©<br>
 (κΈ°λ³Έμ μΌλ΅ κ½¤ μμ£Ό μ‚¬μ©ν•λ” νΈ, μ»΄νμΌ μ‹κ°„μ—λ§ κ²€μ‚¬ν•κΈ°μ—<br>
 μμ‹ νƒ€μ…μ„ λ¶€λ¨ νƒ€μ…μΌλ΅ κ²€μ‚¬ν•λ” μ—…μΊμ¤ν…μ€ λ¬Έμ μ—†μ΄ κ°€λ¥ν•λ‚<br>
 λ¶€λ¨ νƒ€μ…μ—μ„ μμ‹ νƒ€μ…μΌλ΅ μΊμ¤ν…ν•λ” λ‹¤μ΄ μΊμ¤ν…μ€ λ¶λ…ν™•ν•λ‹¤)<br>
 (λ‹¤λ§ μΌλ¶€λ¬ static_castλ¥Ό μ‚¬μ©ν•μ—¬ assertλ‚ ν¬λμ‹λ¥Ό λ°μƒμ‹μΌ<br>
 λ””λ²„κΉ…μ„ ν•λ” κ²½μ°λ„ μμΌλ‹ νμ‚¬μ μ½”λ“ κ·μΉ™μ„ ν™•μΈν•  κ²ƒ)<br>

- dynamic_cast<><br>
 : λ™μ  μΊμ¤ν…(λ°νƒ€μ„ νƒ€μ… ν™•μΈ κ°€λ¥)<br>
 RTTI(Run-Time Type Information)μ„ μ‚¬μ©ν•μ—¬ νƒ€μ… κ²€μ‚¬<br>
 'λ‹¤μ΄μΊμ¤ν…'μ„ μ•μ „ν•κ² μ‚¬μ© κ°€λ¥ν•λ‹¤<br>
 (ν¬μΈν„°μ μΊμ¤ν… μ‹¤ν¨ μ‹, nullptrμ„ λ°ν™<br>
 μ°Έμ΅°μ κ²½μ°λ” std::bad_cast μμ™Έ λ°μƒ)<br>
 ν•΄λ‹Ήλλ” ν΄λμ¤μ— virtual ν‚¤μ›λ“μ μ΅΄μ¬ ν•„μ”<br>
 -> virtual ν‚¤μ›λ“κ°€ μμ–΄μ•Ό μ»΄νμΌλ¬κ°€<br>
 vtable : κ°€μƒ ν•¨μ μ£Όμ† λ©λ΅<br>
 vptr : κ° κ°μ²΄κ°€ κ°€λ¦¬ν‚¤λ” ν…μ΄λΈ” ν¬μΈν„°<br>
 RTTI μ •λ³΄ κµ¬μ΅°μ²΄ : νƒ€μ… μ΄λ¦„,κ³„μΈµκ΄€κ³„<br>
 λ“±μ„ μƒμ„±ν•λ”λ°<br>
 μ΄ μ¤‘ RTTI μ •λ³΄κ°€ ν•„μ”ν•κΈ° λ•λ¬Έ<br>
 
  dynamic_castλ¥Ό μ‚¬μ©ν•μ§€ μ•λ” ν”„λ΅μ νΈλ„ μ΅΄μ¬ν•λ‹¤<br>
  dynamic_castλ” λ°νƒ€μ„μ— RTTIλ¥Ό νƒμƒ‰ν•κΈ°μ— μ¶”κ°€μ μΈ μ¤λ²„ν—¤λ“κ°€ λ°μƒν•λ©°<br>
  RTTI μμ²΄λ„ μ¶”κ°€μ μΈ λ©”λ¨λ¦¬λ¥Ό μ†λ¨ν•λ” μ”μ†κ°€ μμ–΄μ„ μ£Όμκ°€ ν•„μ”<br>

- const_cast<><br>
 : const, volatile μ†μ„±μ„ μ κ±°ν•κ±°λ‚ μ¶”κ°€ν•λ”λ° μ‚¬μ©<br>
  (κΈ°λ³Έμ μΌλ΅λ” 'μ κ±°'ν•λ”λ° μ‚¬μ©, μ¶”κ°€ν• λ• const ν‚¤μ›λ“λ¥Ό λ¶™μ—¬ μ‚¬μ©ν•λ”κ²ƒμ΄ κ°€λ¥ν•λ―€λ΅)<br>

  κΈ°λ³Έμ μΌλ΅ μ μ‚¬μ©ν•μ§€ μ•λ” μΊμ¤ν…<br>
  'const'κ°€ λ¶™μ€ μ΄μ  μμ²΄κ°€ 'μμ •ν•μ§€ λ§ κ²ƒ'μ„ μλ―Έν•λ”λ°<br>
  const_castλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤λ©΄ μ• μ΄μ— const ν‚¤μ›λ“λ¥Ό λ¶™μ΄μ§€ μ•λ” κ²ƒμ΄ μ¬λ°”λ¥Έ μ½”λ“<br>

  λ‹¤λ§, μ™Έλ¶€ μ½”λ“(λΌμ΄λΈλ¬λ¦¬ λ“±) κ°™μ΄<br>
  const ν‚¤μ›λ“λ¥Ό μ»¨νΈλ΅¤ν•μ§€ λ»ν•λ” κ²½μ°,<br>
  λ§¤μ° μ‹ μ¤‘ν•κ² μ‚¬μ©ν•  μ μλ‹¤<br>
  (λΌμ΄λΈλ¬λ¦¬ return κ°’μ΄ const μ—¬μ„ κ±΄λ“λ¦¬κ±°λ‚ μμ •ν•  μ μ—†λ” κ²½μ° λ“±)<br>

  volatile? : μ»΄νμΌλ¬ μµμ ν™”μ—μ„ μ μ™Έν•λ” ν‚¤μ›λ“<br>
  (λ©€ν‹° μ¤λ λ“ ν™κ²½ λ“±μ—μ„ μ»΄νμΌλ¬κ°€ κ°μ…ν•μ—¬ κ°’μ΄ λ³€ν•λ”κ±Έ μ›μΉ μ•μ„λ• μ‚¬μ©)<br>

- reinterpret_cast<><br>
 : λΉ„νΈ μμ¤€μ μ¬ν•΄μ„ μΊμ¤ν…<br>
  κ°•μ λ΅ ν•΄λ‹Ή νƒ€μ…μΌλ΅ μΊμ¤ν…ν•λ―€λ΅<br>
  μΌλ°μ μΌλ΅λ” μ‚¬μ©ν•μ§€ μ•μ<br>
  μ£Όλ΅ 'λ©”λ¨λ¦¬' μƒμ raw byteλ¥Ό νΉμ • νƒ€μ…μΌλ΅ ν•΄μ„ν•λ”λ° μ‚¬μ©ν•λ‹¤<br>
  (λ„¤νΈμ›ν¬λ‚ νμΌ μ½μ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°λ¥Ό 'νΉμ •ν• νƒ€μ…'μΌλ΅ μ½μ–΄ ν•΄μ„ν•λ” λ°©μ‹)<br>

| μΊμ¤νΈ μΆ…λ¥             | λ©μ                        | κ²€μ‚¬ μ‹μ  | μ£Όμ” μ©λ„                 | μ•μ „μ„±     |
| ------------------ | ------------------------ | ----- | --------------------- | ------- |
| `static_cast`      | μ»΄νμΌ μ‹ νƒ€μ… λ³€ν™              | μ»΄νμΌνƒ€μ„ | κΈ°λ³Έν•, μ—…μΊμ¤ν…, λ…μ‹μ  λ³€ν™     | μ¤‘κ°„      |
| `dynamic_cast`     | λ‹¤μ΄μΊμ¤ν… + RTTI κ²€μ‚¬          | λ°νƒ€μ„   | λ¶€λ¨ β†’ μμ‹ μ•μ „ν• λ‹¤μ΄μΊμ¤ν…     | λ†’μ      |
| `const_cast`       | `const`/`volatile` μ κ±°/λ¶€μ—¬ | μ»΄νμΌνƒ€μ„ | const μ κ±°, API νΈν™μ©     | μ¤‘κ°„\~μ„ν—  |
| `reinterpret_cast` | λΉ„νΈ μμ¤€μ λ³€ν™ (λ¬΄μ΅°κ±΄ λ³€ν™)       | μ»΄νμΌνƒ€μ„ | ν¬μΈν„° β†” μ •μ, ν¬μΈν„° β†” ν¬μΈν„° λ“± | λ‚®μ (μ„ν—) |



## μ—…/λ‹¤μ΄ μΊμ¤ν…
'μƒμ†'κ³Ό μ—°κ΄€λ ν¬μΈν„° κΈ°λ¥μ΄μ 'μΊμ¤ν…'<br>

### μ—…μΊμ¤ν…
μμ‹ ν΄λμ¤ -> λ¶€λ¨ ν΄λμ¤ λ΅μ ν•λ³€ν™<br>

```
class Animal {
public:
    void speak() { std::cout << "Animal\n"; }
    virtual void Run() { std::cout << "λ™λ¬Όμ΄ λ‹¬λ¦°λ‹¤\n"; }
};

class Dog : public Animal {
public:
    void speak() { std::cout << "Dog\n"; }
    void Run() override { std::cout << "κ°κ°€ λ‹¬λ¦°λ‹¤\n"; }
};

int main() {
    Dog d;
    Animal* a = &d;   // β… μ—…μΊμ¤ν…
    a->speak();       // Animal::speak() νΈμ¶ (μ •μ  λ°”μΈλ”©)
    a->Run();         // Dog::Run() νΈμ¶ (λ™μ  λ°”μΈλ”©)
}

```

λ¶€λ¨ νƒ€μ…μΌλ΅ λ™μ‘ν•λ―€λ΅<br>
λ¶€λ¨μ— μ •μλ λ©¤λ²„λ§ μ ‘κ·Ό κ°€λ¥<br>
(virtual λ΅ μ„ μ–Έν•΄μ•Ό 'λ™μ  λ°”μΈλ”©'μΌλ΅ νΈμ¶λ¨)<br>



### λ‹¤μ΄μΊμ¤ν…
λ¶€λ¨ ν΄λμ¤ -> μμ‹ ν΄λμ¤λ΅μ λ³€ν™<br>

```
Animal* a = new Dog();        // μ‹¤μ λ” Dogμ΄μ§€λ§ νƒ€μ…μ€ Animal*
Dog* d = (Dog*)a;             // β οΈ λ‹¤μ΄μΊμ¤ν… (λ…μ‹μ  ν•„μ”)

Dog* safe_d = dynamic_cast<Dog*>(a);  // μ•μ „ν• λ‹¤μ΄μΊμ¤ν… (RTTI ν•„μ”)

```

μ£Όμν•  μ <br>

```
Animal* a = new Animal();  // μ‹¤μ λ΅λ” Animal
Dog* d = (Dog*)a;          // β οΈ μ„ν—ν• λ‹¤μ΄μΊμ¤ν…
d->speak();                // μ •μλμ§€ μ•μ€ λ™μ‘(UB)!
```

μ΄λ° μ‹μ μ½”λ“λ” λ§¤μ° μ„ν—<br>
μƒμ† λ°›μ€ ν΄λμ¤λ” λ” ν° ν¬κΈ°μ ν΄λμ¤μΌ κ°€λ¥μ„±μ΄ λ†’κΈ°μ—<br>
'ν• λ‹Ήλμ§€ μ•μ€ μμ—­'μ λ©”λ¨λ¦¬μ— μ ‘κ·Όν•μ—¬ μ„ν—<br>
+ d->speak()λ” Animalμ vtableμ„ ν™•μΈν•μ—¬ νΈμ¶ν•λ” μ λ„ μ„ν—<br>

κ·Έλλ„ μ μ‚¬μ©ν•λ” κ²½μ°<br>
λ‹¤μ–‘ν• μμ‹ ν΄λμ¤λ“¤μ λ‹¤ν•μ„±κ³Ό λ¶„κΈ°λ¬Έ λ“±μ„ μ‹¤ν–‰ν•  μ μμ<br>

```
// λ² μ΄μ¤ ν΄λμ¤
class Animal {
public:
    virtual void speak() { cout << "Some animal sound\n"; }
    virtual ~Animal() = default;
};

// νμƒ ν΄λμ¤ 1
class Dog : public Animal {
public:
    void speak() override { cout << "Woof!\n"; }
    void bark() { cout << "Barking loudly!\n"; }
};

// νμƒ ν΄λμ¤ 2
class Cat : public Animal {
public:
    void speak() override { cout << "Meow!\n"; }
};

// νμƒ ν΄λμ¤ 3
class Duck : public Animal {
public:
    void speak() override { cout << "Quack!\n"; }
};

vector<Animal*> zoo;
zoo.push_back(new Dog());
zoo.push_back(new Cat());
zoo.push_back(new Duck());
zoo.push_back(new Dog());

// λ¨λ‘ speak νΈμ¶, Dogλ§ barkλ„ νΈμ¶
for (Animal* a : zoo) {
    a->speak();  // λ‹¤ν•μ„±μΌλ΅ λ™μ‘

    // λ‹¤μ΄μΊμ¤ν…μ„ μ‹λ„ (Dog νƒ€μ…μΈμ§€ ν™•μΈ)
    if (Dog* d = dynamic_cast<Dog*>(a)) {
        d->bark();  // Dogλ§ μ‹¤ν–‰
    }
}

```

---

## κΉμ€/μ–•μ€ λ³µμ‚¬
λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό μ—°κ΄€λ μ¤‘μ”ν• κ°λ…μΌλ΅<br>
ν•΄λ‹Ή λ©”λ¨λ¦¬ κ³µκ°„μ„ 'κ³µμ 'ν• μ§€, λ©”λ¨λ¦¬ κ³µκ°„κΉμ§€ λ³µμ‚¬ν•μ—¬<br>
λ…λ¦½μ‹ν‚¬μ§€μ— λ€ν• κ°λ…μ΄λ‹¤<br>

### μ–•μ€ λ³µμ‚¬(Shallow Copy)
κ°μ²΄μ 'ν¬μΈν„°'λ§ λ³µμ‚¬ν•μ—¬ 'λ³µμ‚¬ν• μ›λ³Έ'κ³Ό 'κ°™μ€' λ©”λ¨λ¦¬ μ„μΉλ¥Ό κ°–λ”λ‹¤<br>

```
#include <iostream>
#include <cstring>
using namespace std;

class Shallow {
public:
    char* name;

    Shallow(const char* str) {
        name = new char[strlen(str) + 1];
        strcpy(name, str);
    }

    // λ””ν΄νΈ λ³µμ‚¬ μƒμ„±μ = μ–•μ€ λ³µμ‚¬!
    // Shallow(const Shallow& other) = default;

    ~Shallow() {
        delete[] name;
    }
};

int main() {
    Shallow a("Dog");
    Shallow b = a;  // β οΈ μ–•μ€ λ³µμ‚¬

    b.name[0] = 'L';  // bλ§ λ°”κΏ¨μ§€λ§ aλ„ λ°”λ€
    cout << a.name << endl;  // μ¶λ ¥: "Log" (μλ„μΉ μ•μ)
}
```

μμ‹λ¥Ό λ³΄μλ©΄<br>
bλ” aμ 'Dog' κΈ€μλ¥Ό μ–•μ€ λ³µμ‚¬λ΅ copyν•¨<br>
(μ‚¬μ‹¤μƒ b.name = a.nameμΌλ΅ ν¬μΈν„° μ£Όμ†λ¥Ό λ³µμ‚¬)<br>

b.nameμ„ λ°”κΎΈκ² λλ©΄<br>
aμ™€ bκ°€ κ³µμ ν•κ³  μλ” μ£Όμ†κ°’μ„ μ°Ύμ•„κ°€<br>
'λ©”λ¨λ¦¬ μμ—­' λ‚΄λ¶€μ— μλ” "Dog"μ„ μμ •ν•κ² λλ‹¤<br>

---

### κΉμ€ λ³µμ‚¬(Deep Copy)

```
class Deep {
public:
    char* name;

    Deep(const char* str) {
        name = new char[strlen(str) + 1];
        strcpy(name, str);
    }

    // κΉμ€ λ³µμ‚¬ μƒμ„±μ κµ¬ν„
    Deep(const Deep& other) {
        name = new char[strlen(other.name) + 1];
        strcpy(name, other.name);
    }

    ~Deep() {
        delete[] name;
    }
};

```

μ„ μμ‹μ—μ„ λ³µμ‚¬ μƒμ„±μλ¥Ό κµ¬ν„ν•μ—¬<br>
"Dog"μ„ μΉ΄ν”Όν•  λ•, λ³„λ„μ λ©”λ¨λ¦¬ μμ—­μ„ μ΅μ€ ν›„,<br>
κ·Έ λ‚΄μ©λ¬Όμ„ μΉ΄ν”Όν•κ² λ¨<br>

λ”°λΌμ„ aμ™€ bλ” λ³„λ„μ λ©”λ¨λ¦¬ κ³µκ°„μ„ κ°€μ§€κ² λλ©°<br>
μƒνΈ λ…λ¦½μ μ΄κ² λλ‹¤<br>

- Rule of Five?<br>
 ν¬μΈν„° λ©¤λ²„λ¥Ό κ°€μ§„ ν΄λμ¤λ” μ•„λμ 5κ°€μ§€λ¥Ό μ§μ ‘ κµ¬ν„ν•΄μ•Ό μ•μ „ν•λ” κ·μΉ™<br>
 1. μ†λ©Έμ (~Class)
 2. λ³µμ‚¬ μƒμ„±μ(Class(const Class&))
 3. λ³µμ‚¬ λ€μ… μ—°μ‚°μ(operator=())
 4. μ΄λ™ μƒμ„±μ(Class(Class&&))
 5. μ΄λ™ λ€μ… μ—°μ‚°μ(operator=(MyClass&&))<br>
 ('μ΄λ™'κ³Ό 'rvalue'λ” λ‹Ήμ¥ λ‹¤λ£¨μ§€λ” μ•μ„ μμ •)<br>


μ •λ¦¬<br>

| κµ¬λ¶„     | μ–•μ€ λ³µμ‚¬         | κΉμ€ λ³µμ‚¬           |
| ------ | ------------- | --------------- |
| λ©”λ¨λ¦¬ κ³µμ  | β… κ³µμ ν•¨ (κ°™μ€ μ£Όμ†) | β κ³µμ  μ•ν•¨ (μƒ λ©”λ¨λ¦¬) |
| μ•μ „μ„±    | β οΈ μ΄μ¤‘ ν•΄μ  μ„ν—   | β… μ•μ „            |
| μ‚¬μ© λ©μ   | λ‹¨μ κµ¬μ΅°         | λ¦¬μ†μ¤ μ†μ  κ°μ²΄       |
| λ””ν΄νΈ λ™μ‘ | μ»΄νμΌλ¬ μλ™ μƒμ„±    | μ§μ ‘ κµ¬ν„ ν•„μ”        |

- λ¬΄μ΅°κ±΄ κΉμ€ λ³µμ‚¬κ°€ μΆ‹μ€ κ²ƒλ§μ€ μ•„λ‹λ‹¤<br>
  μ„ μ–Έν• 'λ©”λ¨λ¦¬'κ°€ λ§¤μ° ν° κ²½μ°<br>
  shared_ptr, μ½κΈ° μ „μ© λ“±μΌλ΅ λ©”λ¨λ¦¬λ¥Ό κ³µμ ν•λ” κ²ƒμ΄<br>
  λ©”λ¨λ¦¬ ν¨μ¨μ΄ λ†’μ•„μ§€λ©°, λ¶ν•„μ”ν• λ©”λ¨λ¦¬ ν• λ‹Ήμ„ ν•μ§€ μ•μ•„λ„ λ¨<br>
  (λ‹¤λ§ λ©”λ¨λ¦¬ ν•΄μ λ” λ°λ“μ‹ μ›λ³Έ ν¬μΈν„° μ½μ—μ„ μ²λ¦¬ν•κ±°λ‚<br>
  μ•μ „ν•κ² μ¤λ§νΈ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ)<br>
  (λ¬Όλ΅  μ¤λ§νΈ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ”λΌλ„ <br>
  μ™„λ²½ν λ©”λ¨λ¦¬ λ„μλ¥Ό λ§‰μ„ μ μλ”κ²ƒμ€<br>
  μ•„λ‹λ―€λ΅ μ£Όμν•μ ex : μν™μ°Έμ΅°)<br>
  
---

## λ•κΈ€λ¦¬ ν¬μΈν„°(dangling pointer)
μ΄λ―Έ 'ν•΄μ λ λ©”λ¨λ¦¬'λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°<br>

ν¬μΈν„°κ°€ μ–΄λ– ν• μ£Όμ†κ°’μ„ κ°€μ§€κ³  μλ”λ°<br>
ν•΄λ‹Ή μ„μΉμ— κ°€λ³΄λ‹ μ΄λ―Έ λ©”λ¨λ¦¬κ°€ ν•΄μ λμ–΄ μμ–΄μ„<br>
'μ–΄λ– ν• κ°’'μ΄ μλ”μ§€λ¥Ό λ¨λ¥΄λ” κ²½μ°λ¥Ό λ»ν•λ‹¤<br>

```
int* p = new int(10);
delete p;        // λ©”λ¨λ¦¬ ν•΄μ λ¨
*p = 20;         // β λ•κΈ€λ§ ν¬μΈν„° μ‚¬μ© β†’ μ •μλμ§€ μ•μ€ λ™μ‘ (UB)
```

μ΄λ¬ν• λ•κΈ€λ¦¬ ν¬μΈν„°λ” κ°‘μκΈ° ν”„λ΅κ·Έλ¨μ΄ λ‹¤μ΄λκ±°λ‚<br>
ν¬λμ‹λ¥Ό λ°μƒμ‹ν‚¤κ±°λ‚ λ°μ΄ν„° μ¤μ—Όμ μ›μΈμ΄ λλ―€λ΅<br>
λ°λ“μ‹ λ§‰μ•„μ•Ό ν•λ‹¤<br>

| λ°©λ²•                      | μ„¤λ…                                                 |
| ----------------------- | -------------------------------------------------- |
| **delete ν›„ nullptr λ€μ…** | `delete p; p = nullptr;` β†’ λ” μ΄μƒ μλ»λ μ ‘κ·Ό λ°©μ§€          |
| **RAII μ‚¬μ© (μ¤λ§νΈ ν¬μΈν„°)**   | `std::unique_ptr`, `std::shared_ptr`λ΅ μƒλ… μ£ΌκΈ°λ¥Ό μλ™ κ΄€λ¦¬ |
| **μ§€μ—­ λ³€μ μ£Όμ†λ¥Ό λ°ν™ν•μ§€ μ•κΈ°**   | λ€μ‹  `new`, νΉμ€ λ§¤κ°λ³€μ μ°Έμ΅°λ΅ μ „λ‹¬                           |
| **λ²”μ„ λ‚΄μ—μ„λ§ ν¬μΈν„° μ‚¬μ©**      | μ™Έλ¶€μ—μ„ μ°Έμ΅°ν•μ§€ μ•λ„λ΅ κµ¬μ΅° μ„¤κ³„                                |

##  RAII (Resource Acquisition Is Initialization)
'μμ› νλ“'μ„ κ°μ²΄μ μ΄κΈ°ν™”μ™€ λ™μ‹μ— ν•λ©°<br>
'μμ› ν•΄μ 'λ¥Ό κ°μ²΄μ μ†λ©Έκ³Ό κ°™μ΄ ν•λ‹¤λ” μλ―Έ<br>

C++μ μμ› κ΄€λ¦¬ λ°©μ‹μ΄λ©° 'κΈ°λ¥'μ€ μ•„λ‹μ§€λ§<br>
μƒμ„±μ/μ†λ©Έμ κµ¬μ΅°λ΅λ¶€ν„° μ‹μ‘ν• 'μμ› κ΄€λ¦¬ λ°©μ‹'μ΄λ‹¤<br>
(μΌμΆ…μ ν¨λ¬λ‹¤μ„)<br>

```
class FileGuard {
    FILE* fp;
public:
    FileGuard(const char* path) {
        fp = fopen(path, "r");
    }

    ~FileGuard() {
        if (fp) fclose(fp);
    }
};

```

μμ‹μ FileGuard ν΄λμ¤λ”<br>
1. μƒμ„± μ‹, fopen()μ„ ν†µν•΄ μμ› νλ“<br>
2. scopeλ¥Ό λ²—μ–΄λ‚λ” κ²½μ°, fileGuardκ°€ νΈμ¶λμ–΄ μμ›μ„ ν•΄μ <br>
3. μμ™Έκ°€ λ°μƒν•μ—¬λ„ C++μ΄ μ§€μ—­ κ°μ²΄λ¥Ό νκ΄΄ν•λ©° stackμ„ μΆ…λ£μ‹ν‚¤κΈ°μ— μμ› ν•΄μ λ” μ •μƒμ μΌλ΅ μΌμ–΄λ‚¨<br>
   (μμ™Έ λ°μƒμ‹, μ§€μ—­ κ°μ²΄μ ν΄λμ¤ μ†λ©Έμκ°€ νΈμ¶λκΈ°μ—)<br>

C++μ€ κ°μ²΄μ μ†λ©Έ μ‹μ μ΄ λ…ν™•ν•κΈ°μ— 'RAII'κ°€ κ°€λ¥<br>
(delete νΈμ¶, μ§€μ—­ λ³€μμ scope λ²—μ–΄λ‚¨ λ“±)<br>

λ‹¤λ§ C#,Java λ‚ Unreal κ°™μ€ κ²μ„ μ—”μ§„μ€<br>
μμ²΄μ μΌλ΅ Garbage Collectionμ΄ μ΅΄μ¬ν•κΈ°μ—<br>
RAIIκ°€ μ μ©λλ‹¤κ³  λ³΄κΈ΄ νλ“¤ μ μλ‹¤<br>
(Unreal GCμ™€ Shared_ptrμ λΉ„κµλ” μ•„λμ½μ—μ„)

## μ¤λ§νΈ ν¬μΈν„°(Smart Pointer)
μΌλ° ν¬μΈν„°μ²λΌ λ™μ‘ν•μ§€λ§, λ©”λ¨λ¦¬λ¥Ό μλ™μΌλ΅ κ΄€λ¦¬ν•΄μ£Όλ” ν΄λμ¤ ν…ν”λ¦Ώ<br>
(RAII κΈ°λ°μΌλ΅ 'μ¤μ½”ν”„'λ¥Ό λ²—μ–΄λ‚λ©΄ μλ™μΌλ΅ μμ›μ„ ν•΄μ )<br>

- κΈ°μ΅΄ raw pointer(μƒ ν¬μΈν„°)λ¥Ό ν†µν• λ¬Έμ μ™€<br>
 μ¤λ§νΈ ν¬μΈν„° μ‚¬μ©μ„ ν†µν• λ¬Έμ  κ°μ„ <br>

| κΈ°μ΅΄ raw pointer λ¬Έμ               | μ¤λ§νΈ ν¬μΈν„°μ ν•΄κ²°              |
| ------------------------------ | ------------------------ |
| `delete` λ„λ½ β†’ λ©”λ¨λ¦¬ λ„μ           | μ¤μ½”ν”„ λ²—μ–΄λ‚λ©΄ μλ™ ν•΄μ            |
| μμ™Έ μ‹ `delete` μ‹¤ν–‰ μ• λ¨           | μ†λ©Έμμ—μ„ μλ™ μ²λ¦¬λ¨             |
| λ‹¤μ¤‘ ν¬μΈν„°κ°€ κ°™μ€ λ©”λ¨λ¦¬λ¥Ό κ°€λ¦¬ν‚΄ β†’ μ΄μ¤‘ μ‚­μ  μ„ν— | `shared_ptr`μ μ°Έμ΅° μΉ΄μ΄νΈλ΅ ν•΄κ²° |

<br>

- μ¤λ§νΈ ν¬μΈν„°μ μΆ…λ¥

| νƒ€μ…                   | μ†μ κ¶ λ¨λΈ         | νΉμ§•                             |
| -------------------- | -------------- | ------------------------------ |
| `std::unique_ptr<T>` | λ‹¨μΌ μ†μ  (λ³µμ‚¬ λ¶κ°€)  | κ°€μ¥ λ‹¨μ, κ°€μ¥ λΉ λ¦„                   |
| `std::shared_ptr<T>` | κ³µμ  μ†μ  (μ°Έμ΅° μΉ΄μ΄νΈ) | μ—¬λ¬ κ³³μ—μ„ κ³µμ  κ°€λ¥                   |
| `std::weak_ptr<T>`   | λΉ„μ†μ  μ°Έμ΅°         | μν™ μ°Έμ΅° λ°©μ§€μ© (shared\_ptrκ³Ό ν•¨κ» μ‚¬μ©) |

<br>

1. unique_ptr<br>
  : ν• κ°μ²΄μ μ†μ μλ” 'ν•λ‚'λΌλ” κ°λ…<br>
  λ³µμ‚¬ λ¶κ°€ ν•λ©°, 'μ΄λ™'λ§ κ°€λ¥<br>

```
std::unique_ptr<int> p1 = std::make_unique<int>(10);
// std::unique_ptr<int> p2 = p1;        // β λ³µμ‚¬ λ¶κ°€
std::unique_ptr<int> p2 = std::move(p1);  // β… μ†μ κ¶ μ΄λ™
```
<br>

2. shared_ptr<br>
 : μ—¬λ¬ shared_ptr λ“¤μ΄ 'λ™μΌ κ°μ²΄'λ¥Ό μ†μ <br>
   'μ°Έμ΅° μΉ΄μ΄νΈ(ref Count)'λ¥Ό λ‚΄λ¶€μ μΌλ΅ μ‚¬μ©ν•μ—¬<br>
   μ†μ  κ°μ²΄λ¥Ό 'μ–Όλ§λ‚ μ°Έμ΅°'ν•λ”μ§€ νμ•…<br>
   λ§μ§€λ§‰ shared_ptrμ νκ΄΄λ΅(ref Count == 0)<br>
   κ°μ²΄λ¥Ό μ‚­μ <br>
  

```
#include <memory>
#include <iostream>

struct MyObject {
    MyObject() { std::cout << "μƒμ„±\n"; }
    ~MyObject() { std::cout << "μ†λ©Έ\n"; }
};

int main() {
    std::shared_ptr<MyObject> p1 = std::make_shared<MyObject>();
    std::shared_ptr<MyObject> p2 = p1;  // μ°Έμ΅° μΉ΄μ΄νΈ μ¦κ°€
}  // λ§μ§€λ§‰ shared_ptr νκ΄΄ β†’ μ†λ©Έμ νΈμ¶

```

3. weak_ptr<br>
 : shared_ptrμ μ°Έμ΅° μΉ΄μ΄νΈμ— μν–¥μ„ μ£Όμ§€ μ•λ” 'λΉ„μ†μ ' μ°Έμ΅°<br>
   shared_ptr λΌλ¦¬μ μν™ μ°Έμ΅°λ¥Ό 'λ°©μ§€'ν•κΈ° μ„ν•¨<br>
   (-> shared_ptrμ„ ν†µν•΄ μ„λ΅λ¥Ό μ°Έμ΅°ν•λ” κ°μ²΄κ°€ μμΌλ©΄<br>
   refCountκ°€ 0μ΄ λμ§€ μ•κΈ° λ•λ¬Έ...)<br>
   μ΄λ―Έ μ°Έμ΅°ν•λ” λ€μƒμ΄ μ—†μ„ μ μκΈ°μ— .lock() λ“±μ„ ν†µν•΄<br>
   μ ‘κ·Όν•΄μ•Ό μ•μ „<br>

<br>

```
#include <memory>

std::shared_ptr<int> p = std::make_shared<int>(42);
std::weak_ptr<int> wp = p;

if (auto sp = wp.lock()) {
    std::cout << *sp << std::endl;  // μ•μ „ν•κ² μ ‘κ·Ό
}
```

<br>

- μ¤λ§νΈ ν¬μΈν„° μ •λ¦¬

| ν•­λ©       | `unique_ptr` | `shared_ptr` | `weak_ptr` |
| -------- | ------------ | ------------ | ---------- |
| μ†μ κ¶      | λ‹¨μΌ μ†μ         | κ³µμ  μ†μ         | μ†μ  μ• ν•¨     |
| λ³µμ‚¬       | β κΈμ§€         | β… ν—μ©         | β… κ°€λ¥       |
| μ΄λ™       | β… κ°€λ¥         | β… κ°€λ¥         | β… κ°€λ¥       |
| μ°Έμ΅° μΉ΄μ΄νΈ   | μ—†μ           | μμ           | μμ (λΉ„κ°€μ‚°)   |
| μν™ μ°Έμ΅° λ°©μ§€ | ν•΄λ‹Ή μ—†μ        | β            | β… ν•„μ       |

<br>

---

### Shared_ptrμ€ RAII? Unreal GCλ” RAIIκ°€ μ•„λ‹κ°€?
Shared_ptrμ€ μ°Έμ΅°μΉ΄μ΄νΈ(refCount) κΈ°λ°μ΄λ©°, λ™μ‹μ— 'μ¤μ½”ν”„'κΈ°λ° κ°μ²΄<br>
(refCountκ°€ 0μΈ μ‹μ μ—μ„ λ°”λ΅ μμ› ν•΄μ )<br>

Unreal GCλ” 'κ°μ²΄'μ μ§μ ‘μ μΈ delete νΈμ¶μ„ ν•  μ μ—†κ³ <br>
GC λ‚΄λ¶€ λ£¨ν‹΄μ— λ”°λΌμ„ μ κ±°ν•κΈ°μ— 'μ κ±° μ‹μ 'μ΄ λ¶λ…ν™•ν•λ‹¤<br>

μ •λ¦¬<br>

| ν•­λ©             | `shared_ptr` (RAII)              | Unreal GC (μ¶”μ  κΈ°λ°)                     |
| -------------- | -------------------------------- | ------------------------------------- |
| RAII μ μ© μ—¬λ¶€   | β… YES (μ†μ κ¶ μ¤μ½”ν”„ κΈ°λ° ν•΄μ ) | β NO (GCκ°€ μ†λ©Έ μ‹μ  κ²°μ •) |
| μ°Έμ΅° μΉ΄μ΄νΈ κΈ°λ°?     | β… μ (ref count == 0 β†’ μ¦‰μ‹ delete) | β μ•„λ‹μ¤ (ref countλ” μ¶”μ μ— λ„μ›€λ§ μ¤„ λΏ)        |
| μλ™ ν•΄μ  μ‹μ        | μ •ν™• (μ¤μ½”ν”„ λ²—μ–΄λ‚  λ•)                   | λ¶λ…ν™• (GC λ£¨ν‹΄ μ‹¤ν–‰ μ‹μ )                     |
| μ§μ ‘ delete κ°€λ¥?  | β… λ‚΄λ¶€μ—μ„ delete νΈμ¶                 | β μ λ€ κΈμ§€ (Unreal κ΄€λ¦¬ λ€μƒ)                |
| κ°λ°μκ°€ ν•΄μ  μ μ–΄ κ°€λ¥? | β… κ°€λ¥ (`reset()`, μ¤μ½”ν”„ μΆ…λ£ λ“±)       | β μ§μ ‘ μ μ–΄ λ¶κ°€. UPROPERTYλ΅ κ°„μ ‘ μ μ–΄          |
| μμ™Έ μ•μ „μ„±         | β… λ›°μ–΄λ‚¨                            | β μ ν•μ  (μ—λ””ν„°μ—μ„λ„ GC λλ¦¬κ±°λ‚ μλ™μΌλ΅ Clearν•΄μ•Ό ν•¨) |
| ref count μ‚¬μ© | β… μ¤‘μ‹¬ λ΅μ§               | π”„ μΌλ¶€ μ‚¬μ© (λ³΄μ΅°μ  μ¶”μ μ©)  |
| μλ™ μ‚­μ  μ‹μ      | **μ¦‰μ‹, μμΈ΅ κ°€λ¥**         | **λΉ„λ™κΈ°, μμΈ΅ λ¶κ°€**      |


