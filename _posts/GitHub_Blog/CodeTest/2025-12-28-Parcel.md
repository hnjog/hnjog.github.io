---
title: "백준 Gold 3 택배"
date : "2025-12-28 10:30:00 +0900"
last_modified_at: "2025-12-28T10:30:00"
categories:
  - 코딩 테스트
tags:
  - 플로이드-워셜
---

## 택배 (백준 Gold 3)
<https://www.acmicpc.net/problem/1719><br>

n개의 집하장과 m개의 경로가 아래와 같이 주어진다<br>

[![Image](https://github.com/user-attachments/assets/9f50092b-457f-4039-8ca3-5698eef817e6)](https://github.com/user-attachments/assets/9f50092b-457f-4039-8ca3-5698eef817e6){: .image-popup}<br>

이러한 경로들을 받아<br>

[![Image](https://github.com/user-attachments/assets/c59ebdf0-27fc-4619-9b66-e37b2ae91ef9)](https://github.com/user-attachments/assets/c59ebdf0-27fc-4619-9b66-e37b2ae91ef9){: .image-popup}<br>

다음과 같이 '최단 경로'로 '이동'시키기 위해<br>
'가장 먼저 거쳐야 하는 집하장'을 기록하는 문제<br>

## 풀이 방법  

문제 자체는 '플로이드-워셜'을 사용하여 풀 수 있으나<br>
다소 응용이 필요하다<br>

- n~m의 각 요소에 대한 최단거리를 구함<br>
- 최단거리를 구할 때, '가장 먼저' 거쳐야 하는 집하장을 표기<br>

**상세 풀이**<br>

1. pair<int,int>를 통해 '첫 경로'와 '총 비용'을 별도로 관리<br>
2. i == j라면 자기 자신을, 경로가 연결되었다면 [i][j] = j, [j][i] = i로 초기화<br>
3. 플로이드-워셜을 진행하며, k번째 요소를 경유하는게 더 짧다면 k번째의 '첫 경로'를 따라가도록 설정<br>

## 제출 코드

```cpp
#include<iostream>
#include<vector>
#include<unordered_map>

using namespace std;

typedef pair<int, int> pii;

int main()
{
	ios::sync_with_stdio(false);
	cin.tie(nullptr);

	int n, m;
	cin >> n >> m;

	const int vv = 1e9;

	vector<vector<pii>> maps(n + 1, vector<pii>(n + 1, { 0,vv }));

	for (int i = 0; i <= n; i++)
		maps[i][i].first = i;

	for (int i = 0; i < m; i++)
	{
		int a, b, c;
		cin >> a >> b >> c;

		maps[a][b].first = b;
		maps[a][b].second = c;
		maps[b][a].first = a;
		maps[b][a].second = c;
	}

	for (int k = 1; k <= n; k++)
	{
		for (int i = 1; i <= n; i++)
		{
			for (int j = 1; j <= n; j++)
			{
				if (maps[i][j].second > maps[i][k].second + maps[k][j].second)
				{
					maps[i][j].first = maps[i][k].first;

					maps[i][j].second = maps[i][k].second + maps[k][j].second;
				}
			}
		}
	}

	for (int i = 1; i <= n; i++)
	{
		for (int j = 1; j <= n; j++)
		{
			if (i == j)
			{
				cout << "- ";
				continue;
			}

			cout << maps[i][j].first << ' ';
		}

		cout << '\n';
	}

	return 0;
}
```

## 결과

[![Image](https://github.com/user-attachments/assets/8633e7e0-c5a1-456d-a4a6-01f4e5fe4484)](https://github.com/user-attachments/assets/8633e7e0-c5a1-456d-a4a6-01f4e5fe4484){: .image-popup}<br>

플로이드 워셜의 응용 문제로<br>
처음에는 first 부분에 k를 그대로 대입하였다가<br>
예제에서 틀렸다<br>

이후, '경로'의 '요소'를 따라가는 쪽으로 수정하여 통과<br>
